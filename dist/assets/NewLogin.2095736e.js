import{F as g,J as h}from"./input.38efb5e7.js";import{E as w,a as f}from"./form-item.69a54e18.js";import{_ as y,Z as v,m as c,p as x,d as o,w as l,q as t,A as F,a5 as b,O as T,aa as V,ab as k,ac as L}from"./index.9604a7b6.js";const N={name:"Login",data(){return{loginForm:{username:"",password:""},loginRules:{username:[{type:"email",required:!0,trigger:"blur",message:"\u8BF7\u8F93\u5165\u90AE\u7BB1"}],password:[{required:!0,message:"\u521B\u5EFA\u5BC6\u7801",trigger:"blur"},{pattern:/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,20}$/,message:"\u5BC6\u7801\u5FC5\u987B\u540C\u65F6\u5305\u542B\u6570\u5B57\u4E0E\u5B57\u6BCD,\u4E14\u957F\u5EA6\u4E3A 8-20\u4F4D"}]},loading:!1,passwordType:"password",redirect:void 0}},watch:{$route:{handler:function(s){this.redirect=s.query&&s.query.redirect},immediate:!0}},methods:{showPwd(){this.passwordType==="password"?this.passwordType="":this.passwordType="password",this.$nextTick(()=>{this.$refs.password.focus()})},handleLogin(){this.$refs.loginForm.validate(s=>{if(s)this.loading=!0,this.$store.dispatch("user/login",this.loginForm).then(()=>{this.$router.push({path:this.redirect||"/"}),this.loading=!1}).catch(()=>{this.loading=!1});else return console.log("error submit!!"),!1})}}},u=s=>(k("data-v-36968e86"),s=s(),L(),s),E={class:"login-container"},I=u(()=>t("div",{class:"title-container"},[t("h3",{class:"title"},"\u6B22\u8FCE\u4F7F\u7528")],-1)),q={class:"svg-container"},B={class:"svg-container"},C=u(()=>t("p",{class:"tips"},[t("a",{href:"/register",type:"primary"},"\u8FD8\u6CA1\u6709\u5E10\u53F7\uFF1F\u7ACB\u5373\u6CE8\u518C")],-1));function A(s,r,K,P,e,a){const i=v("svg-icon"),p=g,d=w,m=h,_=f;return c(),x("div",E,[o(_,{ref:"loginForm",model:e.loginForm,rules:e.loginRules,class:"login-form","auto-complete":"on","label-position":"left"},{default:l(()=>[I,o(d,{prop:"username"},{default:l(()=>[t("span",q,[o(i,{"icon-class":"user"})]),o(p,{ref:"username",modelValue:e.loginForm.username,"onUpdate:modelValue":r[0]||(r[0]=n=>e.loginForm.username=n),placeholder:"\u90AE\u7BB1",name:"username",type:"text",tabindex:"1","auto-complete":"on"},null,8,["modelValue"])]),_:1}),o(d,{prop:"password"},{default:l(()=>[t("span",B,[o(i,{"icon-class":"password"})]),(c(),F(p,{key:e.passwordType,ref:"password",modelValue:e.loginForm.password,"onUpdate:modelValue":r[1]||(r[1]=n=>e.loginForm.password=n),type:e.passwordType,placeholder:"\u5BC6\u7801",name:"password",tabindex:"2","auto-complete":"on",onKeyup:b(a.handleLogin,["enter","native"])},null,8,["modelValue","type","onKeyup"])),t("span",{class:"show-pwd",onClick:r[2]||(r[2]=(...n)=>a.showPwd&&a.showPwd(...n))},[o(i,{"icon-class":e.passwordType==="password"?"eye":"eye-open"},null,8,["icon-class"])])]),_:1}),o(m,{loading:e.loading,type:"primary",style:{width:"100%","margin-bottom":"30px"},onClick:T(a.handleLogin,["prevent"])},{default:l(()=>[V("\u767B\u5F55")]),_:1},8,["loading","onClick"]),C]),_:1},8,["model","rules"])])}var R=y(N,[["render",A],["__scopeId","data-v-36968e86"]]);export{R as default};
