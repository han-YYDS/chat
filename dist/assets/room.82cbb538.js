var ao=Object.defineProperty;var io=(e,t,o)=>t in e?ao(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var Ve=(e,t,o)=>(io(e,typeof t!="symbol"?t+"":t,o),o);import{J as re,f as Vt,n as Re,j as P,L as nt,r as w,V as At,Q as ro,D as ke,y as n,o as at,l as A,m,A as z,w as V,p as S,M as K,x as k,z as D,aa as ce,W as lo,i as tt,q as d,a5 as We,R as Pe,d as b,P as Je,O as Qe,S as uo,aw as wt,a as co,t as mo,Z as Ke,b as ve,v as he,T as po,an as qt,ao as Pt,ah as Lt,e as vo,G as $t,_ as ue,u as oe,s as X,F as de,a4 as be,ab as Gt,ac as Ht,k as Tt,a9 as $e,ax as fo,ay as _o,a7 as go,a6 as ho,az as yo,aA as Co,B as Io,C as Eo,E as Ae}from"./index.9604a7b6.js";import{i as zt,e as Ro,f as So,g as bo,h as To,j as me,u as _e,L as Z,_ as ko,d as xo,t as E,k as kt,A as Kt,c as Se,T as Le,M as ye,a as Te,b as Wt,W as dt,l as it,I as Q,V as Qt,m as Ao,n as wo,E as Lo,S as Ut}from"./Language.47c60dcb.js";import{S as ie}from"./SvgIcon.361ff82b.js";import{E as le,a as $o}from"./index.704cb161.js";import{_ as rt,e as lt,k as Fe,l as ht,m as ot,u as xt,d as Jt,ap as Uo,w as Yt,U as yt,A as _t,D as Ct,aq as It,y as Do,f as Zt,s as Mo,ao as Oo,an as Bo,z as No,E as et,ar as jo,t as Fo,J as Ye,F as Vo,O as qo,T as Dt,n as Mt,i as Po,am as Go,P as Ot}from"./input.38efb5e7.js";import{l as Et,c as De,b as Ho,E as zo,u as Ko,C as Wo}from"./checkbox.197a2f94.js";import{E as Qo,u as Jo}from"./index.fbf39a24.js";const Yo='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',Zo=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,Bt=e=>Array.from(e.querySelectorAll(Yo)).filter(t=>Xo(t)&&Zo(t)),Xo=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},en=(e,t)=>{let o;re(()=>e.value,s=>{var a,r;s?(o=document.activeElement,Vt(t)&&((r=(a=t.value).focus)==null||r.call(a))):o.focus()})},Rt="_trap-focus-children",Ge=[],Nt=e=>{if(Ge.length===0)return;const t=Ge[Ge.length-1][Rt];if(t.length>0&&e.code===Qo.tab){if(t.length===1){e.preventDefault(),document.activeElement!==t[0]&&t[0].focus();return}const o=e.shiftKey,s=e.target===t[0],a=e.target===t[t.length-1];s&&o&&(e.preventDefault(),t[t.length-1].focus()),a&&!o&&(e.preventDefault(),t[0].focus())}},tn={beforeMount(e){e[Rt]=Bt(e),Ge.push(e),Ge.length<=1&&document.addEventListener("keydown",Nt)},updated(e){Re(()=>{e[Rt]=Bt(e)})},unmounted(){Ge.shift(),Ge.length===0&&document.removeEventListener("keydown",Nt)}},on=P({inheritAttrs:!1});function nn(e,t,o,s,a,r){return nt(e.$slots,"default")}var sn=rt(on,[["render",nn],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const an=P({name:"ElCollectionItem",inheritAttrs:!1});function rn(e,t,o,s,a,r){return nt(e.$slots,"default")}var ln=rt(an,[["render",rn],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const un="data-el-collection-item",cn=e=>{const t=`El${e}Collection`,o=`${t}Item`,s=Symbol(t),a=Symbol(o),r={...sn,name:t,setup(){const u=w(null),l=new Map;At(s,{itemMap:l,getItems:()=>{const f=n(u);if(!f)return[];const g=Array.from(f.querySelectorAll(`[${un}]`));return[...l.values()].sort((_,R)=>g.indexOf(_.ref)-g.indexOf(R.ref))},collectionRef:u})}},i={...ln,name:o,setup(u,{attrs:l}){const I=w(null),f=ro(s,void 0);At(a,{collectionItemRef:I}),ke(()=>{const g=n(I);g&&f.itemMap.set(g,{ref:g,...l})}),at(()=>{const g=n(I);f.itemMap.delete(g)})}};return{COLLECTION_INJECTION_KEY:s,COLLECTION_ITEM_INJECTION_KEY:a,ElCollection:r,ElCollectionItem:i}},gt=lt({trigger:Et.trigger,effect:{...De.effect,default:"light"},type:{type:Fe(String)},placement:{type:Fe(String),default:"bottom"},popperOptions:{type:Fe(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:Fe([Number,String]),default:0},maxHeight:{type:Fe([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:Fe(Object)},teleported:De.teleported});lt({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:ht}});lt({onKeydown:{type:Fe(Function)}});cn("Dropdown");const dn=lt({trigger:Et.trigger,placement:gt.placement,disabled:Et.disabled,visible:De.visible,transition:De.transition,popperOptions:gt.popperOptions,tabindex:gt.tabindex,content:De.content,popperStyle:De.popperStyle,popperClass:De.popperClass,enterable:{...De.enterable,default:!0},effect:{...De.effect,default:"light"},teleported:De.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),mn={"update:visible":e=>ot(e),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},pn="onUpdate:visible",vn=P({name:"ElPopover"}),fn=P({...vn,props:dn,emits:mn,setup(e,{expose:t,emit:o}){const s=e,a=A(()=>s[pn]),r=xt("popover"),i=w(),u=A(()=>{var h;return(h=n(i))==null?void 0:h.popperRef}),l=A(()=>[{width:Jt(s.width)},s.popperStyle]),I=A(()=>[r.b(),s.popperClass,{[r.m("plain")]:!!s.content}]),f=A(()=>s.transition===`${r.namespace.value}-fade-in-linear`),g=()=>{var h;(h=i.value)==null||h.hide()},v=()=>{o("before-enter")},_=()=>{o("before-leave")},R=()=>{o("after-enter")},y=()=>{o("update:visible",!1),o("after-leave")};return t({popperRef:u,hide:g}),(h,x)=>(m(),z(n(Ho),lo({ref_key:"tooltipRef",ref:i},h.$attrs,{trigger:h.trigger,placement:h.placement,disabled:h.disabled,visible:h.visible,transition:h.transition,"popper-options":h.popperOptions,tabindex:h.tabindex,content:h.content,offset:h.offset,"show-after":h.showAfter,"hide-after":h.hideAfter,"auto-close":h.autoClose,"show-arrow":h.showArrow,"aria-label":h.title,effect:h.effect,enterable:h.enterable,"popper-class":n(I),"popper-style":n(l),teleported:h.teleported,persistent:h.persistent,"gpu-acceleration":n(f),"onUpdate:visible":n(a),onBeforeShow:v,onBeforeHide:_,onShow:R,onHide:y}),{content:V(()=>[h.title?(m(),S("div",{key:0,class:K(n(r).e("title")),role:"title"},k(h.title),3)):D("v-if",!0),nt(h.$slots,"default",{},()=>[ce(k(h.content),1)])]),default:V(()=>[h.$slots.reference?nt(h.$slots,"reference",{key:0}):D("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var _n=rt(fn,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popover/src/popover.vue"]]);const jt=(e,t)=>{const o=t.arg||t.value,s=o==null?void 0:o.popperRef;s&&(s.triggerRef=e)};var gn={mounted(e,t){jt(e,t)},updated(e,t){jt(e,t)}};const hn="popover",yn=Uo(gn,hn),Cn=Yt(_n,{directive:yn}),In=lt({modelValue:{type:[Boolean,String,Number],default:!1},value:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},activeIcon:{type:ht},inactiveIcon:{type:ht},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},id:String,loading:{type:Boolean,default:!1},beforeChange:{type:Fe(Function)},size:{type:String,validator:zt},tabindex:{type:[String,Number]}}),En={[yt]:e=>ot(e)||tt(e)||_t(e),[Ct]:e=>ot(e)||tt(e)||_t(e),[It]:e=>ot(e)||tt(e)||_t(e)},Rn=["onClick"],Sn=["id","aria-checked","aria-disabled","name","true-value","false-value","disabled","tabindex","onKeydown"],bn=["aria-hidden"],Tn=["aria-hidden"],kn=["aria-hidden"],St="ElSwitch",xn=P({name:St}),An=P({...xn,props:In,emits:En,setup(e,{expose:t,emit:o}){const s=e,a=uo(),{formItem:r}=Do(),i=Zt(),u=xt("switch");Mo({from:'"value"',replacement:'"model-value" or "v-model"',scope:St,version:"2.3.0",ref:"https://element-plus.org/en-US/component/switch.html#attributes",type:"Attribute"},A(()=>{var C;return!!((C=a.vnode.props)!=null&&C.value)}));const{inputId:l}=Oo(s,{formItemContext:r}),I=Bo(A(()=>s.loading)),f=w(s.modelValue!==!1),g=w(),v=w(),_=A(()=>[u.b(),u.m(i.value),u.is("disabled",I.value),u.is("checked",h.value)]),R=A(()=>({width:Jt(s.width)}));re(()=>s.modelValue,()=>{f.value=!0}),re(()=>s.value,()=>{f.value=!1});const y=A(()=>f.value?s.modelValue:s.value),h=A(()=>y.value===s.activeValue);[s.activeValue,s.inactiveValue].includes(y.value)||(o(yt,s.inactiveValue),o(Ct,s.inactiveValue),o(It,s.inactiveValue)),re(h,C=>{var c;g.value.checked=C,s.validateEvent&&((c=r==null?void 0:r.validate)==null||c.call(r,"change").catch(p=>No()))});const x=()=>{const C=h.value?s.inactiveValue:s.activeValue;o(yt,C),o(Ct,C),o(It,C),Re(()=>{g.value.checked=h.value})},j=()=>{if(I.value)return;const{beforeChange:C}=s;if(!C){x();return}const c=C();[wt(c),ot(c)].includes(!0)||Fo(St,"beforeChange must return type `Promise<boolean>` or `boolean`"),wt(c)?c.then(O=>{O&&x()}).catch(O=>{}):c&&x()},J=A(()=>u.cssVarBlock({...s.activeColor?{"on-color":s.activeColor}:null,...s.inactiveColor?{"off-color":s.inactiveColor}:null,...s.borderColor?{"border-color":s.borderColor}:null})),G=()=>{var C,c;(c=(C=g.value)==null?void 0:C.focus)==null||c.call(C)};return ke(()=>{g.value.checked=h.value}),t({focus:G,checked:h}),(C,c)=>(m(),S("div",{class:K(n(_)),style:Je(n(J)),onClick:Qe(j,["prevent"])},[d("input",{id:n(l),ref_key:"input",ref:g,class:K(n(u).e("input")),type:"checkbox",role:"switch","aria-checked":n(h),"aria-disabled":n(I),name:C.name,"true-value":C.activeValue,"false-value":C.inactiveValue,disabled:n(I),tabindex:C.tabindex,onChange:x,onKeydown:We(j,["enter"])},null,42,Sn),!C.inlinePrompt&&(C.inactiveIcon||C.inactiveText)?(m(),S("span",{key:0,class:K([n(u).e("label"),n(u).em("label","left"),n(u).is("active",!n(h))])},[C.inactiveIcon?(m(),z(n(et),{key:0},{default:V(()=>[(m(),z(Pe(C.inactiveIcon)))]),_:1})):D("v-if",!0),!C.inactiveIcon&&C.inactiveText?(m(),S("span",{key:1,"aria-hidden":n(h)},k(C.inactiveText),9,bn)):D("v-if",!0)],2)):D("v-if",!0),d("span",{ref_key:"core",ref:v,class:K(n(u).e("core")),style:Je(n(R))},[C.inlinePrompt?(m(),S("div",{key:0,class:K(n(u).e("inner"))},[C.activeIcon||C.inactiveIcon?(m(),z(n(et),{key:0,class:K(n(u).is("icon"))},{default:V(()=>[(m(),z(Pe(n(h)?C.activeIcon:C.inactiveIcon)))]),_:1},8,["class"])):C.activeText||C.inactiveText?(m(),S("span",{key:1,class:K(n(u).is("text")),"aria-hidden":!n(h)},k(n(h)?C.activeText:C.inactiveText),11,Tn)):D("v-if",!0)],2)):D("v-if",!0),d("div",{class:K(n(u).e("action"))},[C.loading?(m(),z(n(et),{key:0,class:K(n(u).is("loading"))},{default:V(()=>[b(n(jo))]),_:1},8,["class"])):D("v-if",!0)],2)],6),!C.inlinePrompt&&(C.activeIcon||C.activeText)?(m(),S("span",{key:1,class:K([n(u).e("label"),n(u).em("label","right"),n(u).is("active",n(h))])},[C.activeIcon?(m(),z(n(et),{key:0},{default:V(()=>[(m(),z(Pe(C.activeIcon)))]),_:1})):D("v-if",!0),!C.activeIcon&&C.activeText?(m(),S("span",{key:1,"aria-hidden":!n(h)},k(C.activeText),9,kn)):D("v-if",!0)],2)):D("v-if",!0)],14,Rn))}});var wn=rt(An,[["__file","/home/runner/work/element-plus/element-plus/packages/components/switch/src/switch.vue"]]);const Ln=Yt(wn),$n=P({name:"ElMessageBox",directives:{TrapFocus:tn},components:{ElButton:Ye,ElFocusTrap:zo,ElInput:Vo,ElOverlay:Ro,ElIcon:et,...qo},inheritAttrs:!1,props:{buttonSize:{type:String,validator:zt},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:t}){const{t:o}=Ko(),s=xt("message-box"),a=w(!1),{nextZIndex:r}=Jo(),i=co({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:r()}),u=A(()=>{const ee=i.type;return{[s.bm("icon",ee)]:ee&&Dt[ee]}}),l=Mt(),I=Mt(),f=Zt(A(()=>e.buttonSize),{prop:!0,form:!0,formItem:!0}),g=A(()=>i.icon||Dt[i.type]||""),v=A(()=>!!i.message),_=w(),R=w(),y=w(),h=w(),x=w(),j=A(()=>i.confirmButtonClass);re(()=>i.inputValue,async ee=>{await Re(),e.boxType==="prompt"&&ee!==null&&H()},{immediate:!0}),re(()=>a.value,ee=>{var Ce,Ee;ee&&(e.boxType!=="prompt"&&(i.autofocus?y.value=(Ee=(Ce=x.value)==null?void 0:Ce.$el)!=null?Ee:_.value:y.value=_.value),i.zIndex=r()),e.boxType==="prompt"&&(ee?Re().then(()=>{var B;h.value&&h.value.$el&&(i.autofocus?y.value=(B=Y())!=null?B:_.value:y.value=_.value)}):(i.editorErrorMessage="",i.validateError=!1))});const J=A(()=>e.draggable);So(_,R,J),ke(async()=>{await Re(),e.closeOnHashChange&&window.addEventListener("hashchange",G)}),at(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",G)});function G(){!a.value||(a.value=!1,Re(()=>{i.action&&t("action",i.action)}))}const C=()=>{e.closeOnClickModal&&O(i.distinguishCancelAndClose?"close":"cancel")},c=To(C),p=ee=>{if(i.inputType!=="textarea")return ee.preventDefault(),O("confirm")},O=ee=>{var Ce;e.boxType==="prompt"&&ee==="confirm"&&!H()||(i.action=ee,i.beforeClose?(Ce=i.beforeClose)==null||Ce.call(i,ee,i,G):G())},H=()=>{if(e.boxType==="prompt"){const ee=i.inputPattern;if(ee&&!ee.test(i.inputValue||""))return i.editorErrorMessage=i.inputErrorMessage||o("el.messagebox.error"),i.validateError=!0,!1;const Ce=i.inputValidator;if(typeof Ce=="function"){const Ee=Ce(i.inputValue);if(Ee===!1)return i.editorErrorMessage=i.inputErrorMessage||o("el.messagebox.error"),i.validateError=!0,!1;if(typeof Ee=="string")return i.editorErrorMessage=Ee,i.validateError=!0,!1}}return i.editorErrorMessage="",i.validateError=!1,!0},Y=()=>{const ee=h.value.$refs;return ee.input||ee.textarea},se=()=>{O("close")},ge=()=>{e.closeOnPressEscape&&se()};return e.lockScroll&&bo(a),en(a),{...mo(i),ns:s,overlayEvent:c,visible:a,hasMessage:v,typeClass:u,contentId:l,inputId:I,btnSize:f,iconComponent:g,confirmButtonClasses:j,rootRef:_,focusStartRef:y,headerRef:R,inputRef:h,confirmRef:x,doClose:G,handleClose:se,onCloseRequested:ge,handleWrapperClick:C,handleInputEnter:p,handleAction:O,t:o}}}),Un=["aria-label","aria-describedby"],Dn=["aria-label"],Mn=["id"];function On(e,t,o,s,a,r){const i=Ke("el-icon"),u=Ke("close"),l=Ke("el-input"),I=Ke("el-button"),f=Ke("el-focus-trap"),g=Ke("el-overlay");return m(),z(po,{name:"fade-in-linear",onAfterLeave:t[11]||(t[11]=v=>e.$emit("vanish")),persisted:""},{default:V(()=>[ve(b(g,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:V(()=>[d("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:K(`${e.ns.namespace.value}-overlay-message-box`),onClick:t[8]||(t[8]=(...v)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...v)),onMousedown:t[9]||(t[9]=(...v)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...v)),onMouseup:t[10]||(t[10]=(...v)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...v))},[b(f,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:V(()=>[d("div",{ref:"rootRef",class:K([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:Je(e.customStyle),tabindex:"-1",onClick:t[7]||(t[7]=Qe(()=>{},["stop"]))},[e.title!==null&&e.title!==void 0?(m(),S("div",{key:0,ref:"headerRef",class:K(e.ns.e("header"))},[d("div",{class:K(e.ns.e("title"))},[e.iconComponent&&e.center?(m(),z(i,{key:0,class:K([e.ns.e("status"),e.typeClass])},{default:V(()=>[(m(),z(Pe(e.iconComponent)))]),_:1},8,["class"])):D("v-if",!0),d("span",null,k(e.title),1)],2),e.showClose?(m(),S("button",{key:0,type:"button",class:K(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:t[0]||(t[0]=v=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:t[1]||(t[1]=We(Qe(v=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[b(i,{class:K(e.ns.e("close"))},{default:V(()=>[b(u)]),_:1},8,["class"])],42,Dn)):D("v-if",!0)],2)):D("v-if",!0),d("div",{id:e.contentId,class:K(e.ns.e("content"))},[d("div",{class:K(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(m(),z(i,{key:0,class:K([e.ns.e("status"),e.typeClass])},{default:V(()=>[(m(),z(Pe(e.iconComponent)))]),_:1},8,["class"])):D("v-if",!0),e.hasMessage?(m(),S("div",{key:1,class:K(e.ns.e("message"))},[nt(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(m(),z(Pe(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(m(),z(Pe(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:V(()=>[ce(k(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):D("v-if",!0)],2),ve(d("div",{class:K(e.ns.e("input"))},[b(l,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":t[2]||(t[2]=v=>e.inputValue=v),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:K({invalid:e.validateError}),onKeydown:We(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),d("div",{class:K(e.ns.e("errormsg")),style:Je({visibility:e.editorErrorMessage?"visible":"hidden"})},k(e.editorErrorMessage),7)],2),[[he,e.showInput]])],10,Mn),d("div",{class:K(e.ns.e("btns"))},[e.showCancelButton?(m(),z(I,{key:0,loading:e.cancelButtonLoading,class:K([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:t[3]||(t[3]=v=>e.handleAction("cancel")),onKeydown:t[4]||(t[4]=We(Qe(v=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:V(()=>[ce(k(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):D("v-if",!0),ve(b(I,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:K([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:t[5]||(t[5]=v=>e.handleAction("confirm")),onKeydown:t[6]||(t[6]=We(Qe(v=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:V(()=>[ce(k(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[he,e.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,Un)]),_:3},8,["z-index","overlay-class","mask"]),[[he,e.visible]])]),_:3})}var Bn=rt($n,[["render",On],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const st=new Map,Nn=e=>{let t=document.body;return e.appendTo&&(tt(e.appendTo)&&(t=document.querySelector(e.appendTo)),Ot(e.appendTo)&&(t=e.appendTo),Ot(t)||(t=document.body)),t},jn=(e,t,o=null)=>{const s=b(Bn,e,$t(e.message)||qt(e.message)?{default:$t(e.message)?e.message:()=>e.message}:null);return s.appContext=o,Pt(s,t),Nn(e).appendChild(t.firstElementChild),s.component},Fn=()=>document.createElement("div"),Vn=(e,t)=>{const o=Fn();e.onVanish=()=>{Pt(null,o),st.delete(a)},e.onAction=r=>{const i=st.get(a);let u;e.showInput?u={value:a.inputValue,action:r}:u=r,e.callback?e.callback(u,s.proxy):r==="cancel"||r==="close"?e.distinguishCancelAndClose&&r!=="cancel"?i.reject("close"):i.reject("cancel"):i.resolve(u)};const s=jn(e,o,t),a=s.proxy;for(const r in e)Lt(e,r)&&!Lt(a.$props,r)&&(a[r]=e[r]);return a.visible=!0,a};function Ze(e,t=null){if(!Po)return Promise.reject();let o;return tt(e)||qt(e)?e={message:e}:o=e.callback,new Promise((s,a)=>{const r=Vn(e,t!=null?t:Ze._context);st.set(r,{options:e,callback:o,resolve:s,reject:a})})}const qn=["alert","confirm","prompt"],Pn={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};qn.forEach(e=>{Ze[e]=Gn(e)});function Gn(e){return(t,o,s,a)=>{let r="";return vo(o)?(s=o,r=""):Go(o)?r="":r=o,Ze(Object.assign({title:r,message:t,type:"",...Pn[e]},s,{boxType:e}),a)}}Ze.close=()=>{st.forEach((e,t)=>{t.doClose()}),st.clear()};Ze._context=null;const Be=Ze;Be.install=e=>{Be._context=e._context,e.config.globalProperties.$msgbox=Be,e.config.globalProperties.$messageBox=Be,e.config.globalProperties.$alert=Be.alert,e.config.globalProperties.$confirm=Be.confirm,e.config.globalProperties.$prompt=Be.prompt};const He=Be,Hn=location.protocol==="file:"||location.hostname==="localhost"||location.hostname==="127.0.0.1",Xt=location.host==="web.sdk.qcloud.com",zn=Hn||Xt,Kn=Xt,Wn="iHWefAYqCFrCVqqyIZ",Qn="TUIRoomKit-Web";let mt;const vt=document.createElement("script");vt.type="text/javascript";vt.src="https://cdn-go.cn/aegis/aegis-sdk/latest/aegis.min.js";document.getElementsByTagName("head")[0].appendChild(vt);vt.onload=()=>{mt=new Aegis({id:Wn,uin:"",reportApiSpeed:!0,reportAssetSpeed:!0,spa:!0}),Me.storedReportEventList&&Me.storedReportEventList.forEach(e=>{mt.reportEvent(e)})};class Jn{constructor(){Ve(this,"sdkAppId",0);Ve(this,"projectName",Qn);Ve(this,"isUploadLoaded",zn);Ve(this,"isUploadDetailEvent",Kn);Ve(this,"hasUploadedEventList",[]);Ve(this,"storedReportEventList",[])}setSdkAppId(t){this.sdkAppId=t}reportEvent(t){if(!this.isUploadLoaded)return;const{name:o,ext1:s}=t;if(this.isUploadDetailEvent||o==="loaded"){const a={...t,ext2:this.projectName,ext3:this.sdkAppId};mt?this.hasUploadedEventList.indexOf(`${o}_${s}`)<0&&(this.hasUploadedEventList.push(`${o}_${s}`),mt.reportEvent(a)):this.storedReportEventList.push(a)}}}const Me=new Jn;const eo=e=>(Gt("data-v-eb7b7106"),e=e(),Ht(),e),Yn={key:0,class:"layout-container"},Zn={class:"layout-block-container"},Xn={class:"layout-title"},es={class:"layout-block-container"},ts=eo(()=>d("div",{class:"left-container"},null,-1)),os={class:"right-container"},ns={class:"layout-title"},ss={class:"layout-block-container"},as={class:"top-container"},is=eo(()=>d("div",{class:"bottom-container"},null,-1)),rs={class:"layout-title"},ls=P({__name:"LayoutControl",setup(e){const{t}=oe(),o=me(),{layout:s}=X(o),a=_e(),{streamNumber:r}=X(a),i=w(!1),u=w(null);function l(g){o.setLayout(g),Me.reportEvent({name:"layout",ext1:g})}function I(){i.value?(document.removeEventListener("click",f,!1),i.value=!1):(i.value=!0,document.addEventListener("click",f,!1))}function f(g){i.value&&u.value&&!u.value.contains(g.target)&&(document.removeEventListener("click",f),i.value=!1)}return(g,v)=>n(r)>1?(m(),S("div",Yn,[b(ie,{class:"layout-icon","icon-name":"layout",size:"medium",onClick:Qe(I,["stop"])},null,8,["onClick"]),i.value?(m(),S("div",{key:0,ref_key:"layoutList",ref:u,class:"layout-list"},[d("div",{class:K(["layout1","layout-item",`${n(s)===n(Z).NINE_EQUAL_POINTS?"checked":""}`]),onClick:v[0]||(v[0]=_=>l(n(Z).NINE_EQUAL_POINTS))},[d("div",Zn,[(m(!0),S(de,null,be(new Array(9).fill(""),(_,R)=>(m(),S("div",{key:R,class:"layout-block"}))),128))]),d("span",Xn,k(n(t)("Grid")),1)],2),d("div",{class:K(["layout2","layout-item",`${n(s)===n(Z).RIGHT_SIDE_LIST?"checked":""}`]),onClick:v[1]||(v[1]=_=>l(n(Z).RIGHT_SIDE_LIST))},[d("div",es,[ts,d("div",os,[(m(!0),S(de,null,be(new Array(4).fill(""),(_,R)=>(m(),S("div",{key:R,class:"layout-block"}))),128))])]),d("span",ns,k(n(t)("Gallery on right")),1)],2),d("div",{class:K(["layout3","layout-item",`${n(s)===n(Z).TOP_SIDE_LIST?"checked":""}`]),onClick:v[2]||(v[2]=_=>l(n(Z).TOP_SIDE_LIST))},[d("div",ss,[d("div",as,[(m(!0),S(de,null,be(new Array(4).fill(""),(_,R)=>(m(),S("div",{key:R,class:"layout-block"}))),128))]),is]),d("span",rs,k(n(t)("Gallery at top")),1)],2)],512)):D("",!0)])):D("",!0)}});var us=ue(ls,[["__scopeId","data-v-eb7b7106"]]);const cs={class:"header-container"},ds={class:"left-container"},ms={class:"right-container"},ps=P({__name:"index",emits:["logOut"],setup(e){const t=me(),{userId:o,userName:s,avatarUrl:a}=X(t);return(r,i)=>(m(),S("div",cs,[d("div",ds,[b(ko,{class:"header-item user-info","user-id":n(o),"user-name":n(s),"avatar-url":n(a),onLogOut:i[0]||(i[0]=u=>r.$emit("logOut"))},null,8,["user-id","user-name","avatar-url"]),b(xo,{class:"header-item language"})]),d("div",ms,[b(us)])]))}});var vs=ue(ps,[["__scopeId","data-v-c25a7e86"]]),to=(e=>(e.ON_CHANGE_LOG_LEVEL="onChangeLogLevel",e))(to||{});const Ne={LOG_LEVEL_DEBUG:-1,LOG_LEVEL_LOG:0,LOG_LEVEL_INFO:1,LOG_LEVEL_WARN:2,LOG_LEVEL_ERROR:3,LOG_LEVEL_NON_LOGGING:4};var je=(e=>(e.MAIN="main-process",e.RENDER="render-process",e))(je||{});function fs(e){const t=e.toString().length;let o;switch(t){case 1:o=`00${e}`;break;case 2:o=`0${e}`;break;default:o=e;break}return o}function qe(e){const t=new Date;return`${t.toLocaleTimeString("en-US",{hour12:!1})}.${fs(t.getMilliseconds())} [${e}]:`}let Oe=Ne.LOG_LEVEL_DEBUG;const pt={debug(...e){Oe<=Ne.LOG_LEVEL_DEBUG&&console.debug(`${qe(je.RENDER)}`,...e)},log(...e){Oe<=Ne.LOG_LEVEL_LOG&&console.log(`${qe(je.RENDER)}`,...e)},info(...e){Oe<=Ne.LOG_LEVEL_INFO&&console.info(`${qe(je.RENDER)}`,...e)},warn(...e){Oe<=Ne.LOG_LEVEL_WARN&&console.warn(`${qe(je.RENDER)}`,...e)},error(...e){Oe<=Ne.LOG_LEVEL_ERROR&&console.error(`${qe(je.RENDER)}`,...e)},setLevel(e){var t;e>=Ne.LOG_LEVEL_DEBUG&&e<=Ne.LOG_LEVEL_NON_LOGGING?(console.log(`${qe(je.RENDER)} set log level from ${Oe} to ${e}`),Oe=e,(t=window.electron)!=null&&t.ipcRenderer&&window.electron.ipcRenderer.send(to.ON_CHANGE_LOG_LEVEL,e)):console.error(`${qe(je.RENDER)} logger.setLevel() invalid params:${e}`)},getLevel(){return Oe}};const _s=["id"],gs=["src"],hs={class:"corner-user-info-container"},ys=["title"],Cs={key:3},Is=P({__name:"StreamRegion",props:{stream:null,enlargeDomId:null},setup(e){const t=e,{VITE_RUNTIME_SCENE:o}={VITE_APP_TITLE:"TUIRoom",VITE_RUNTIME_ENV:"browser",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0},s=Se(),a="[StreamRegion]",r=me(),i=_e(),{t:u}=oe(),l=w(),I=w(),f=A(()=>`${t.stream.userId}_${t.stream.streamType}`),g=A(()=>{const{userId:R,streamType:y}=t.stream;return R===i.masterUserId&&y===E.exports.TUIVideoStreamType.kCameraStream}),v=A(()=>t.stream.streamType===E.exports.TUIVideoStreamType.kScreenStream),_=A(()=>o==="inner"?`${t.stream.userName} | ${t.stream.userId}`||t.stream.userId:t.stream.userName||t.stream.userId);return re(()=>t.stream.hasVideoStream,async R=>{var y,h,x;if(R&&t.stream.userId!==r.userId){await Re();const j=document.getElementById(`${f.value}`);j&&(pt.debug(`${a}watch isVideoStreamAvailable:`,t.stream.userId,j),(y=s.instance)==null||y.setRemoteRenderView({userId:t.stream.userId,streamType:t.stream.streamType,view:`${f.value}`}),await((h=s.instance)==null?void 0:h.startPlayRemoteVideo({userId:t.stream.userId,streamType:t.stream.streamType})),await((x=s.instance)==null?void 0:x.getTRTCCloud()).setRemoteRenderParams(t.stream.userId,E.exports.TRTCVideoStreamType.TRTCVideoStreamTypeBig,{mirrorType:E.exports.TRTCVideoMirrorType.TRTCVideoMirrorType_Disable,rotation:E.exports.TRTCVideoRotation.TRTCVideoRotation0,fillMode:E.exports.TRTCVideoFillMode.TRTCVideoFillMode_Fit}))}},{immediate:!0}),re(()=>t.stream.hasScreenStream,async R=>{var y,h,x;if(R){await Re();const j=document.getElementById(`${f.value}`);j&&(pt.debug(`${a}watch isScreenStreamAvailable:`,t.stream.userId,j),(y=s.instance)==null||y.setRemoteRenderView({userId:t.stream.userId,streamType:t.stream.streamType,view:`${f.value}`}),await((h=s.instance)==null?void 0:h.startPlayRemoteVideo({userId:t.stream.userId,streamType:t.stream.streamType})),await((x=s.instance)==null?void 0:x.getTRTCCloud()).setRemoteRenderParams(t.stream.userId,E.exports.TRTCVideoStreamType.TRTCVideoStreamTypeSub,{mirrorType:E.exports.TRTCVideoMirrorType.TRTCVideoMirrorType_Disable,rotation:E.exports.TRTCVideoRotation.TRTCVideoRotation0,fillMode:E.exports.TRTCVideoFillMode.TRTCVideoFillMode_Fit}))}},{immediate:!0}),re(()=>t.enlargeDomId,async(R,y)=>{var h,x,j;console.log("watch3"),(f.value===y||f.value===R)&&(await Re(),document.getElementById(`${f.value}`)&&(r.userId===t.stream.userId?t.stream.hasVideoStream&&await((h=s.instance)==null?void 0:h.setLocalRenderView({streamType:E.exports.TUIVideoStreamType.kCameraStream,view:`${f.value}`})):((x=s.instance)==null||x.setRemoteRenderView({userId:t.stream.userId,streamType:t.stream.streamType,view:`${f.value}`}),await((j=s.instance)==null?void 0:j.startPlayRemoteVideo({userId:t.stream.userId,streamType:t.stream.streamType})))))}),(R,y)=>n(f)!==e.enlargeDomId?(m(),S("div",{key:0,ref_key:"streamRegionRef",ref:l,class:"user-stream-container"},[d("div",{id:n(f),class:"stream-region"},null,8,_s),!e.stream.hasVideoStream&&!e.stream.hasScreenStream?(m(),S("div",{key:0,ref_key:"centerUserInfoRef",ref:I,class:"center-user-info-container"},[d("img",{class:"avatar-region",src:e.stream.avatarUrl||n(kt)},null,8,gs)],512)):D("",!0),d("div",hs,[n(g)?(m(),z(ie,{key:0,class:"master-icon","icon-name":"user"})):D("",!0),n(v)?D("",!0):(m(),z(Kt,{key:1,"audio-volume":e.stream.audioVolume,"is-muted":!e.stream.hasAudioStream,size:"small"},null,8,["audio-volume","is-muted"])),n(v)?(m(),z(ie,{key:2,"icon-name":"screen-share",class:"screen-icon"})):D("",!0),d("span",{class:"user-name",title:n(_)},k(n(_)),9,ys),n(v)?(m(),S("span",Cs,k(n(u)("is sharing their screen")),1)):D("",!0)])],512)):D("",!0)}});var Ft=ue(Is,[["__scopeId","data-v-9189bb46"]]);const oo=e=>(Gt("data-v-2f1e8e2a"),e=e(),Ht(),e),Es={key:1,class:"turn-page-container"},Rs=oo(()=>d("div",{class:"turn-page-arrow"},null,-1)),Ss=[Rs],bs=oo(()=>d("div",{class:"turn-page-arrow turn-page-right"},null,-1)),Ts=[bs],ks=P({__name:"StreamContainer",props:{showRoomTool:{type:Boolean}},setup(e){const t=Se(),o=Tt(),{t:s}=oe(),a=w({}),r=w({}),i=_e(),{streamList:u,streamNumber:l,remoteStreamList:I}=X(i),f=me(),{layout:g}=X(f),v=w(!0),_=w(null),R=A(()=>_.value?`${_.value.userId}_${_.value.streamType}`:"");re(I,T=>{T.length===0&&(f.setLayout(Z.NINE_EQUAL_POINTS),_.value=null)});const y=w(0),h=A(()=>g.value!==Z.NINE_EQUAL_POINTS?u.value:u.value.slice(y.value*9,y.value*9+9));re(l,T=>{y.value>Math.ceil(T/9)-1&&(y.value=Math.ceil(T/9)-1,se())});const x=A(()=>g.value===Z.NINE_EQUAL_POINTS&&l.value>9),j=A(()=>y.value>0),J=A(()=>l.value>y.value*9+9);function G(){y.value=y.value-1,se()}function C(){y.value=y.value+1,se()}const c=w(""),p=w(),O=w(),H=A(()=>{let T="";return g.value===Z.TOP_SIDE_LIST&&(T=v.value?"up":"down"),g.value===Z.RIGHT_SIDE_LIST&&(T=v.value?"right":"left"),`icon-control arrow-${T}`});function Y(){if(v.value=!v.value,v.value){if(g.value===Z.RIGHT_SIDE_LIST){ge(),p.value.style.width="calc(100% - 260px)",p.value.style.height="100%";return}if(g.value===Z.TOP_SIDE_LIST){ee(),p.value.style.top="175px",p.value.style.width="100%",p.value.style.height="calc(100% - 175px)";return}}else{let T=0,M=0;const L=document.getElementById("roomContainer").offsetWidth,$=document.getElementById("roomContainer").offsetHeight,W=L/16,te=$/9;if(W>te&&(T=$/9*16,M=$),W<te&&(T=L,M=L/16*9),r.value.width=`${T}px`,r.value.height=`${M}px`,g.value===Z.RIGHT_SIDE_LIST){p.value.style.width="100%",p.value.style.height="100%";return}if(g.value===Z.TOP_SIDE_LIST){p.value.style.top="0px",p.value.style.width="100%",p.value.style.height="100%";return}}}async function se(){c.value="stream-container-flatten",_.value=null,await Re();const T=h.value.length;let M=0,L=0;const $=document.getElementById("roomContainer");let W=$.offsetWidth,te=$.offsetHeight;T<=4?(W=T<2?$.offsetWidth/T:$.offsetWidth/2,te=$.offsetHeight/Math.ceil(T/2)):T>4&&(W=T<3?$.offsetWidth/T:$.offsetWidth/3,te=$.offsetHeight/Math.ceil(T/3));const xe=W/16,Ue=te/9;xe>Ue&&(M=te/9*16,L=te),xe<=Ue&&(M=W,L=W/16*9),a.value.width=`${M}px`,a.value.height=`${L}px`}async function ge(){if(c.value="stream-container-right",_.value||([_.value]=I.value),await Re(),a.value={},p.value){const T=p.value.offsetWidth,M=p.value.offsetHeight;let L=0,$=0;const W=T/16,te=M/9;W>te&&(L=M/9*16,$=M),W<te&&(L=T,$=T/16*9),r.value.width=`${L}px`,r.value.height=`${$}px`}}async function ee(){if(c.value="stream-container-top",_.value||([_.value]=I.value),await Re(),a.value={},p.value){const T=p.value.offsetWidth,M=p.value.offsetHeight;let L=0,$=0;const W=T/16,te=M/9;W>te&&(L=M/9*16,$=M),W<te&&(L=T,$=T/16*9),r.value.width=`${L}px`,r.value.height=`${$}px`}}function Ce(T){g.value===Z.NINE_EQUAL_POINTS&&f.setLayout(Z.RIGHT_SIDE_LIST),_.value=T}function Ee(){switch(g.value){case Z.NINE_EQUAL_POINTS:se();break;case Z.RIGHT_SIDE_LIST:v.value=!0,p.value.style.width="calc(100% - 260px)",p.value.style.height="100%",ge();break;case Z.TOP_SIDE_LIST:v.value=!0,p.value.style.width="100%",p.value.style.height="calc(100% - 175px)",ee();break}}function B(){switch(g.value){case Z.NINE_EQUAL_POINTS:se();break;case Z.RIGHT_SIDE_LIST:ge();break;case Z.TOP_SIDE_LIST:ee();break}}ke(()=>{Ee(),["resize","pageshow"].forEach(T=>{window.addEventListener(T,B)})}),$e(()=>{["resize","pageshow"].forEach(T=>{window.removeEventListener(T,B)})}),re(l,()=>{g.value===Z.NINE_EQUAL_POINTS&&se()}),re(g,()=>{Ee()});const ae=A(()=>[Z.RIGHT_SIDE_LIST,Z.TOP_SIDE_LIST].indexOf(g.value)>=0),fe=T=>{i.addRemoteUser(T.userInfo)},Ie=T=>{i.removeRemoteUser(T.userInfo.userId)},pe=T=>{const{seatList:M,usersSeated:L,usersLeft:$}=T;i.updateOnSeatList(M,L,$)},ct=T=>{var te;const{userId:M,streamType:L,hasVideo:$,reason:W}=T;i.updateUserVideoState(M,L,$),M===f.userId&&!$&&W===E.exports.TUIChangeReason.kChangedByAdmin&&(L===E.exports.TUIVideoStreamType.kCameraStream&&(le({type:"warning",message:s("The host has turned off your camera"),duration:ye.NORMAL}),i.setCanControlSelfVideo(i.enableVideo)),L===E.exports.TUIVideoStreamType.kScreenStream&&le({type:"warning",message:s("The host has turned off your screen sharing"),duration:ye.NORMAL})),M!==f.userId&&L===E.exports.TUIVideoStreamType.kScreenStream&&($?(_.value=i.remoteStreamMap.get(`${M}_${L}`),_.value&&g.value!==Z.RIGHT_SIDE_LIST&&g.value!==Z.TOP_SIDE_LIST&&f.setLayout(Z.RIGHT_SIDE_LIST)):i.remoteStreamList.length===0?(f.setLayout(Z.NINE_EQUAL_POINTS),_.value=null):M===((te=_.value)==null?void 0:te.userId)&&([_.value]=i.remoteStreamList))},Xe=T=>{const{userId:M,hasAudio:L,reason:$}=T;i.updateUserAudioState(M,L),M===f.userId&&!L&&$===E.exports.TUIChangeReason.kChangedByAdmin&&(le({type:"warning",message:s("The host has turned off your microphone"),duration:ye.NORMAL}),i.setCanControlSelfAudio(i.enableAudio))},{isDefaultOpenCamera:U,isDefaultOpenMicrophone:N,isLocalAudioIconDisable:F,isLocalVideoIconDisable:q}=X(i);re(U,async T=>{var M,L,$,W,te;if(T&&!q.value&&document.getElementById(`${i.localStream.userId}_${i.localStream.streamType}`)){if(!i.currentCameraId){const Ue=await((M=t.instance)==null?void 0:M.getCameraDevicesList());i.setCurrentCameraId(Ue[0].deviceId)}await((L=t.instance)==null?void 0:L.setCurrentCameraDevice({deviceId:i.currentCameraId})),await(($=t.instance)==null?void 0:$.setLocalRenderView({streamType:E.exports.TUIVideoStreamType.kCameraStream,view:`${i.localStream.userId}_${i.localStream.streamType}`})),await((W=t.instance)==null?void 0:W.openLocalCamera()),await((te=t.instance)==null?void 0:te.startPushLocalVideo())}});let ne=!0;return re(N,async T=>{var M,L,$,W,te;if(T&&!F.value){await((M=t.instance)==null?void 0:M.openLocalMicrophone()),o&&ne?(ne=!1,setTimeout(()=>{var ze;(ze=t.instance)==null||ze.startPushLocalAudio()},1e3)):await((L=t.instance)==null?void 0:L.startPushLocalAudio());const xe=await(($=t.instance)==null?void 0:$.getMicDevicesList()),Ue=await((W=t.instance)==null?void 0:W.getSpeakerDevicesList());i.currentMicrophoneId||i.setCurrentMicrophoneId(xe[0].deviceId),i.currentSpeakerId||i.setCurrentSpeakerId(Ue[0].deviceId),await((te=t.instance)==null?void 0:te.setCurrentMicDevice({deviceId:i.currentMicrophoneId}))}}),Le.once("ready",()=>{var T,M,L,$,W;(T=t.instance)==null||T.on(E.exports.TUIRoomEvents.onRemoteUserEnterRoom,fe),(M=t.instance)==null||M.on(E.exports.TUIRoomEvents.onRemoteUserLeaveRoom,Ie),(L=t.instance)==null||L.on(E.exports.TUIRoomEvents.onSeatListChanged,pe),($=t.instance)==null||$.on(E.exports.TUIRoomEvents.onUserVideoStateChanged,ct),(W=t.instance)==null||W.on(E.exports.TUIRoomEvents.onUserAudioStateChanged,Xe)}),$e(()=>{var T,M,L,$,W;(T=t.instance)==null||T.off(E.exports.TUIRoomEvents.onRemoteUserEnterRoom,fe),(M=t.instance)==null||M.off(E.exports.TUIRoomEvents.onRemoteUserLeaveRoom,Ie),(L=t.instance)==null||L.off(E.exports.TUIRoomEvents.onSeatListChanged,pe),($=t.instance)==null||$.off(E.exports.TUIRoomEvents.onUserVideoStateChanged,ct),(W=t.instance)==null||W.off(E.exports.TUIRoomEvents.onUserAudioStateChanged,Xe)}),(T,M)=>(m(),S("div",{class:K(c.value)},[ve(d("div",{ref_key:"enlargedContainerRef",ref:p,class:"enlarged-stream-container"},[_.value?(m(),z(Ft,{key:0,stream:_.value,style:Je(r.value)},null,8,["stream","style"])):D("",!0)],512),[[he,n(ae)]]),d("div",{class:K(["stream-list-container",`${v.value?"":"hide-list"}`])},[d("div",{ref_key:"streamListRef",ref:O,class:"stream-list"},[(m(!0),S(de,null,be(n(u),L=>ve((m(),z(Ft,{key:`${L.userId}_${L.streamType}`,stream:L,"enlarge-dom-id":n(R),class:"single-stream",style:Je(a.value),onDblclick:$=>Ce(L)},null,8,["stream","enlarge-dom-id","style","onDblclick"])),[[he,n(h).indexOf(L)>-1]])),128))],512)],2),n(ae)&&e.showRoomTool?(m(),S("div",{key:0,class:K(n(H)),onClick:Y},[b(ie,{"icon-name":"line-arrow-up",size:"medium"})],2)):D("",!0),n(x)&&e.showRoomTool?(m(),S("div",Es,[ve(d("div",{class:"turn-page-arrow-container left-container",onClick:G},Ss,512),[[he,n(j)]]),ve(d("div",{class:"turn-page-arrow-container right-container",onClick:C},Ts,512),[[he,n(J)]])])):D("",!0)],2))}});var xs=ue(ks,[["__scopeId","data-v-2f1e8e2a"]]);const As={class:"content-container"},ws=P({__name:"index",props:{showRoomTool:{type:Boolean}},setup(e){return(t,o)=>(m(),S("div",As,[b(xs,{"show-room-tool":e.showRoomTool},null,8,["show-room-tool"])]))}});var Ls=ue(ws,[["__scopeId","data-v-6f37e103"]]);const $s={class:"dialog-footer"},Us=P({__name:"AudioControl",emits:["click"],setup(e,{emit:t}){const o=Se(),s=_e(),{isAudience:a,localStream:r,isLocalAudioIconDisable:i,enableAudio:u}=X(s),l=w(!1),I=w(),f=w(),{t:g}=oe();function v(){var C,c,p,O;if(i.value){let H="";u.value?a.value&&(H=dt.UNMUTE_LOCAL_MIC_FAIL_AUDIENCE):H=dt.UNMUTE_LOCAL_MIC_FAIL_MUTE_ALL,le({type:"warning",message:g(H),duration:ye.NORMAL});return}r.value.hasAudioStream?((C=o.instance)==null||C.closeLocalMicrophone(),(c=o.instance)==null||c.stopPushLocalAudio(),s.enableAudio||s.setCanControlSelfAudio(!1)):((p=o.instance)==null||p.openLocalMicrophone(),(O=o.instance)==null||O.startPushLocalAudio()),l.value=!1}function _(){l.value?l.value=!1:l.value=!0}function R(C){var c,p;l.value&&!((c=I.value)!=null&&c.$el.contains(C.target))&&!((p=f.value)!=null&&p.$el.contains(C.target))&&(l.value=!1)}const y=w(!1),h=w(0);async function x(C){const{requestAction:c,requestId:p}=C.request;c===E.exports.TUIRequestAction.kRequestToOpenRemoteMicrophone&&(h.value=p,y.value=!0)}async function j(){var C;s.setCanControlSelfAudio(!0),await((C=o.instance)==null?void 0:C.responseRemoteRequest({requestId:h.value,agree:!0})),h.value=0,y.value=!1}async function J(){var C;await((C=o.instance)==null?void 0:C.responseRemoteRequest({requestId:h.value,agree:!1})),h.value=0,y.value=!1}async function G(C){const{requestId:c}=C;h.value===c&&(y.value=!1)}return ke(()=>{document.addEventListener("click",R,!0)}),Le.once("ready",()=>{var C,c;(C=o.instance)==null||C.on(E.exports.TUIRoomEvents.onRequestReceived,x),(c=o.instance)==null||c.on(E.exports.TUIRoomEvents.onRequestCancelled,G)}),$e(()=>{var C,c;document.removeEventListener("click",R,!0),(C=o.instance)==null||C.off(E.exports.TUIRoomEvents.onRequestReceived,x),(c=o.instance)==null||c.off(E.exports.TUIRoomEvents.onRequestCancelled,G)}),(C,c)=>{const p=Ye,O=it;return m(),S(de,null,[d("div",{class:"audio-control-container",onClick:c[0]||(c[0]=H=>t("click"))},[b(Te,{ref_key:"audioIconButtonRef",ref:I,title:n(g)("Mic"),"has-more":!0,"show-more":l.value,disabled:n(i),onClickIcon:v,onClickMore:_},{default:V(()=>[b(Kt,{"audio-volume":n(r).audioVolume,"is-muted":!n(r).hasAudioStream,"is-disabled":n(i)},null,8,["audio-volume","is-muted","is-disabled"])]),_:1},8,["title","show-more","disabled"]),ve(b(Wt,{ref_key:"audioSettingRef",ref:f,class:"audio-tab"},null,512),[[he,l.value]])]),b(O,{modelValue:y.value,"onUpdate:modelValue":c[1]||(c[1]=H=>y.value=H),class:"custom-element-class",title:"Tips",modal:!1,"show-close":!1,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"500px"},{footer:V(()=>[d("span",$s,[b(p,{type:"primary",onClick:j},{default:V(()=>[ce(k(n(g)("Turn on the microphone")),1)]),_:1}),b(p,{onClick:J},{default:V(()=>[ce(k(n(g)("Keep it closed")),1)]),_:1})])]),default:V(()=>[d("span",null,k(n(g)("The host invites you to turn on the microphone")),1)]),_:1},8,["modelValue"])],64)}}});var Ds=ue(Us,[["__scopeId","data-v-0c74c668"]]);const Ms={class:"screen-share-control-container"},Os=P({__name:"Index",setup(e){const t=Se(),o="[ScreenShareControl]",s=_e(),{isAnchor:a,isAudience:r,enableVideo:i}=X(s),{t:u}=oe(),l=w(),I=w(!1),f=w(!1),g=w(!1),v=A(()=>r.value||s.localUser.userRole===E.exports.TUIRole.kGeneralUser&&!i.value),_=A(()=>I.value?u("Sharing"):u("Share screen")),R=A(()=>v.value?Q.ScreenShareDisabled:I.value?Q.ScreenSharing:Q.ScreenShare);re(a,(G,C)=>{!C&&G&&I.value&&j()});async function y(){var G;if(r.value){le({type:"warning",message:u("You currently do not have sharing permission, please raise your hand to apply for sharing permission first"),duration:ye.LONG});return}if(s.localUser.userRole===E.exports.TUIRole.kGeneralUser&&!i.value){le({type:"warning",message:u("Has been full static painting, can not share your screen"),duration:ye.LONG});return}if(I.value){f.value=!0;return}try{await((G=t.instance)==null?void 0:G.startScreenSharing()),I.value=!0}catch(C){pt.error(`${o}startScreenShare error:`,C);let c="";switch(C.name){case"NotReadableError":c="\u7CFB\u7EDF\u7981\u6B62\u5F53\u524D\u6D4F\u89C8\u5668\u83B7\u53D6\u5C4F\u5E55\u5185\u5BB9";break;case"NotAllowedError":C.message.includes("Permission denied by system")?c="\u7CFB\u7EDF\u7981\u6B62\u5F53\u524D\u6D4F\u89C8\u5668\u83B7\u53D6\u5C4F\u5E55\u5185\u5BB9":c="\u7528\u6237\u62D2\u7EDD/\u53D6\u6D88\u5C4F\u5E55\u5206\u4EAB";break;default:c="\u5C4F\u5E55\u5206\u4EAB\u9047\u5230\u672A\u77E5\u9519\u8BEF";break}le({type:"warning",message:c,duration:ye.LONG})}}function h(){f.value=!1,I.value&&(g.value=!0)}function x(){g.value=!1}async function j(){var G;if(I.value)try{await((G=t.instance)==null?void 0:G.stopScreenSharing()),g.value=!1,I.value=!1}catch(C){pt.error(`${o}stopScreenShare error:`,C)}}function J(){I.value=!1}return Le.once("ready",()=>{var G;(G=t.instance)==null||G.on(E.exports.TUIRoomEvents.onUserScreenCaptureStopped,J)}),$e(()=>{var G;(G=t.instance)==null||G.off(E.exports.TUIRoomEvents.onUserScreenCaptureStopped,J)}),(G,C)=>{const c=Ye,p=it;return m(),S("div",Ms,[b(Te,{ref_key:"btnStopRef",ref:l,disabled:n(v),title:n(_),"icon-name":n(R),onClick:y},null,8,["disabled","title","icon-name"]),f.value?(m(),S("div",{key:0,class:"stop-share-region",onClick:h},[b(ie,{class:"stop-share-icon","icon-name":n(Q).ScreenShareStopped},null,8,["icon-name"]),d("span",null,k(n(u)("End sharing")),1)])):D("",!0),b(p,{modelValue:g.value,"onUpdate:modelValue":C[0]||(C[0]=O=>g.value=O),class:"custom-element-class",width:"420px",title:n(u)("Stop sharing?"),modal:!0,"append-to-body":!1,"before-close":x},{footer:V(()=>[d("span",null,[b(c,{type:"primary",onClick:j},{default:V(()=>[ce(k(n(u)("Stop sharing")),1)]),_:1}),b(c,{type:"default",onClick:x},{default:V(()=>[ce(k(n(u)("Cancel")),1)]),_:1})])]),default:V(()=>[d("span",null,k(n(u)("Others will no longer see your screen after you stop sharing. Are you sure you want to stop?")),1)]),_:1},8,["modelValue","title"])])}}});var Bs=ue(Os,[["__scopeId","data-v-0bff3cba"]]);const Ns={class:"fullscreen-control-container"},js=P({__name:"FullScreenControl",setup(e){const{t}=oe(),o=w(!1),s=A(()=>o.value?t("Exit"):t("Full screen")),a=A(()=>o.value?Q.ExitFullScreen:Q.FullScreen);function r(){if(o.value)fo();else{const u=document.getElementById("roomContainer");u&&_o(u)}}function i(){o.value=!o.value}return ke(()=>{document.addEventListener("fullscreenchange",i)}),$e(()=>{document.removeEventListener("fullscreenchange",i)}),(u,l)=>(m(),S("div",Ns,[b(Te,{title:n(s),"icon-name":n(a),onClick:r},null,8,["title","icon-name"])]))}}),Fs={class:"invite-control-container"},Vs=P({__name:"InviteControl",setup(e){const t=me(),{sidebarName:o}=X(t),{t:s}=oe(),a=A(()=>o.value==="invite"?Q.InviteActive:Q.Invite);function r(){if(t.setSidebarOpenStatus&&t.sidebarName==="invite"){t.setSidebarOpenStatus(!1),t.setSidebarName("");return}t.setSidebarOpenStatus(!0),t.setSidebarName("invite")}return(i,u)=>(m(),S("div",Fs,[b(Te,{title:n(s)("Invite"),"icon-name":n(a),onClickIcon:r},null,8,["title","icon-name"])]))}});const qs={class:"dialog-footer"},Ps=P({__name:"VideoControl",emits:["click"],setup(e,{emit:t}){const o=Se(),s=_e(),{enableVideo:a,isAudience:r,localStream:i,isLocalVideoIconDisable:u}=X(s),{t:l}=oe(),I=w(!1),f=w(),g=w(),v=A(()=>u.value?Q.CameraOffDisabled:i.value.hasVideoStream?Q.CameraOn:Q.CameraOff);function _(){var c,p,O,H,Y;if(u.value){let se="";a.value?r.value&&(se=dt.UNMUTE_LOCAL_CAMERA_FAIL_AUDIENCE):se=dt.UNMUTE_LOCAL_CAMERA_FAIL_MUTE_ALL,le({type:"warning",message:l(se),duration:ye.NORMAL});return}i.value.hasVideoStream?((c=o.instance)==null||c.closeLocalCamera(),(p=o.instance)==null||p.stopPushLocalVideo(),s.enableVideo||s.setCanControlSelfVideo(!1)):((O=o.instance)==null||O.setLocalRenderView({view:`${s.localStream.userId}_${s.localStream.streamType}`,streamType:E.exports.TUIVideoStreamType.kCameraStream}),(H=o.instance)==null||H.openLocalCamera(),(Y=o.instance)==null||Y.startPushLocalVideo()),I.value=!1}function R(){I.value?I.value=!1:I.value=!0}function y(c){var p,O;I.value&&!((p=f.value)!=null&&p.$el.contains(c.target))&&!((O=g.value)!=null&&O.$el.contains(c.target))&&(I.value=!1)}const h=w(!1),x=w(0);async function j(c){const{requestAction:p,requestId:O}=c.request;p===E.exports.TUIRequestAction.kRequestToOpenRemoteCamera&&(x.value=O,h.value=!0)}async function J(){var c,p;s.setCanControlSelfVideo(!0),(c=o.instance)==null||c.setLocalRenderView({view:`${s.localStream.userId}_${s.localStream.streamType}`,streamType:E.exports.TUIVideoStreamType.kCameraStream}),await((p=o.instance)==null?void 0:p.responseRemoteRequest({requestId:x.value,agree:!0})),x.value=0,h.value=!1}async function G(){var c;await((c=o.instance)==null?void 0:c.responseRemoteRequest({requestId:x.value,agree:!1})),x.value=0,h.value=!1}async function C(c){const{requestId:p}=c;x.value===p&&(h.value=!1)}return ke(()=>{document.addEventListener("click",y,!0)}),Le.once("ready",()=>{var c,p;(c=o.instance)==null||c.on(E.exports.TUIRoomEvents.onRequestReceived,j),(p=o.instance)==null||p.on(E.exports.TUIRoomEvents.onRequestCancelled,C)}),$e(()=>{var c,p;document.removeEventListener("click",y,!0),(c=o.instance)==null||c.off(E.exports.TUIRoomEvents.onRequestReceived,j),(p=o.instance)==null||p.off(E.exports.TUIRoomEvents.onRequestCancelled,C)}),(c,p)=>{const O=Ye,H=it;return m(),S(de,null,[d("div",{class:"video-control-container",onClick:p[0]||(p[0]=Y=>t("click"))},[b(Te,{ref_key:"videoIconButtonRef",ref:f,title:n(l)("Camera"),"icon-name":n(v),"has-more":!0,disabled:n(u),onClickIcon:_,onClickMore:R},null,8,["title","icon-name","disabled"]),ve(b(Qt,{ref_key:"videoSettingRef",ref:g,class:"video-tab"},null,512),[[he,I.value]])]),b(H,{modelValue:h.value,"onUpdate:modelValue":p[1]||(p[1]=Y=>h.value=Y),class:"custom-element-class",title:"Tips",modal:!1,"show-close":!1,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"500px"},{footer:V(()=>[d("span",qs,[b(O,{type:"primary",onClick:J},{default:V(()=>[ce(k(n(l)("Turn on the camera")),1)]),_:1}),b(O,{onClick:G},{default:V(()=>[ce(k(n(l)("Keep it closed")),1)]),_:1})])]),default:V(()=>[d("span",null,k(n(l)("The host invites you to turn on the camera")),1)]),_:1},8,["modelValue"])],64)}}});var Gs=ue(Ps,[["__scopeId","data-v-35356566"]]);const Hs={class:"invite-control-container"},zs=P({__name:"ManageMemberControl",setup(e){const{t}=oe(),o=me(),{sidebarName:s}=X(o),a=A(()=>s.value==="manage-member"?Q.ManageMemberActive:Q.ManageMember);function r(){if(o.setSidebarOpenStatus&&s.value==="manage-member"){o.setSidebarOpenStatus(!1),o.setSidebarName("");return}o.setSidebarOpenStatus(!0),o.setSidebarName("manage-member")}return(i,u)=>(m(),S("div",Hs,[b(Te,{title:n(t)("Members"),"icon-name":n(a),onClickIcon:r},null,8,["title","icon-name"])]))}});const ut=go("chat",{state:()=>({messageList:[],isMuteChatByMater:!1,unReadCount:0}),getters:{},actions:{updateMessageList(e){this.messageList.map(o=>o.ID).indexOf(e.ID)===-1&&(this.messageList=this.messageList.concat([e]))},updateUnReadCount(e){this.unReadCount=e},addHistoryMessages(e){const t=this.messageList.map(s=>s.ID),o=e.filter(s=>t.indexOf(s.ID)===-1);this.messageList=o.concat(this.messageList).sort((s,a)=>s.sequence-a.sequence)},setIsMuteChatByMater(e){this.isMuteChatByMater=e},reset(){this.messageList=[],this.unReadCount=0,this.isMuteChatByMater=!1}}});const Ks={class:"chat-control-container"},Ws=P({__name:"ChatControl",setup(e){const{t}=oe(),o=me(),s=ut(),{sidebarName:a}=X(o),r=A(()=>a.value==="chat"?Q.ChatActive:Q.Chat);function i(){if(o.setSidebarOpenStatus&&o.sidebarName==="chat"){o.setSidebarOpenStatus(!1),o.setSidebarName("");return}o.setSidebarOpenStatus(!0),o.setSidebarName("chat"),s.updateUnReadCount(0)}return(u,l)=>{const I=$o;return m(),S("div",Ks,[n(s).unReadCount>0?(m(),z(I,{key:0,value:n(s).unReadCount>10?"10+":n(s).unReadCount},{default:V(()=>[b(Te,{title:n(t)("Chat"),"icon-name":n(r),onClickIcon:i},null,8,["title","icon-name"])]),_:1},8,["value"])):(m(),z(Te,{key:1,title:n(t)("Chat"),"icon-name":n(r),onClickIcon:i},null,8,["title","icon-name"]))])}}}),we=Se();function no(){const e=_e(),{applyToAnchorList:t}=X(e),{t:o}=oe();function s(v){const{requestAction:_,requestId:R,userId:y}=v.request;_===E.exports.TUIRequestAction.kRequestToTakeSeat&&y&&e.addApplyToAnchorUser({userId:y,requestId:R})}function a(v){const{userId:_}=v;e.removeApplyToAnchorUser(_)}async function r(v,_){var y;const R=e.remoteUserMap.get(v);if(R){const h=R.applyToAnchorRequestId;h&&await((y=we.instance)==null?void 0:y.responseRemoteRequest({requestId:h,agree:_}))}e.removeApplyToAnchorUser(v)}async function i(v){var R;const _=v.applyToAnchorRequestId;_&&await((R=we.instance)==null?void 0:R.responseRemoteRequest({requestId:_,agree:!0})),e.removeApplyToAnchorUser(v.userId)}async function u(v){var R;const _=v.applyToAnchorRequestId;_&&await((R=we.instance)==null?void 0:R.responseRemoteRequest({requestId:_,agree:!1})),e.removeApplyToAnchorUser(v.userId)}async function l(){var R;const v=t.value.map(y=>({userId:y.userId,userName:y.userName,applyToAnchorRequestId:y.applyToAnchorRequestId}));let _=0;for(;_>=0&&_<v.length;){const{userId:y,userName:h,applyToAnchorRequestId:x}=v[_];try{x&&await((R=we.instance)==null?void 0:R.responseRemoteRequest({requestId:x,agree:!1})),e.removeApplyToAnchorUser(y)}catch{console.error(`\u62D2\u7EDD ${h||y} \u4E0A\u53F0\u7533\u8BF7\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01`),le({type:"warning",message:o("Reject on Stage failed, please retry",{userName:h||y}),duration:ye.NORMAL})}_+=1}}Le.once("ready",()=>{var v,_;(v=we.instance)==null||v.on(E.exports.TUIRoomEvents.onRequestReceived,s),(_=we.instance)==null||_.on(E.exports.TUIRoomEvents.onRequestCancelled,a)}),at(()=>{var v,_;(v=we.instance)==null||v.off(E.exports.TUIRoomEvents.onRequestReceived,s),(_=we.instance)==null||_.off(E.exports.TUIRoomEvents.onRequestCancelled,a)});async function I(v){var y;const{userId:_}=v,R=await((y=we.instance)==null?void 0:y.requestRemoteUserOnSeat({seatIndex:-1,userId:_,timeout:0,requestCallback:h=>{const{requestCallbackType:x,userId:j}=h,J=e.getUserName(j);switch(x){case E.exports.TUIRequestCallbackType.kRequestAccepted:le({type:"success",message:`${J||j} ${o("accepted the invitation to the stage")}`,duration:ye.NORMAL}),e.removeInviteToAnchorUser(j);break;case E.exports.TUIRequestCallbackType.kRequestRejected:le({type:"warning",message:`${J||j} ${o("declined the invitation to the stage")}`,duration:ye.NORMAL}),e.removeInviteToAnchorUser(j);break;case E.exports.TUIRequestCallbackType.kRequestTimeout:break}}}));R&&e.addInviteToAnchorUser({userId:_,requestId:R})}function f(v){var y;const{userId:_,inviteToAnchorRequestId:R}=v;e.removeInviteToAnchorUser(_),R&&((y=we.instance)==null||y.cancelRequest({requestId:R}))}function g(v){var _;(_=we.instance)==null||_.kickRemoteUserOffSeat({seatIndex:-1,userId:v.userId})}return{handleUserApply:r,agreeUserOnStage:i,denyUserOnStage:u,denyAllUserApply:l,inviteUserOnStage:I,cancelInviteUserOnStage:f,kickUserOffStage:g}}const Qs={class:"apply-control-container"},Js={class:"attention master-attention"},Ys={class:"info"},Zs={class:"title-container"},Xs={class:"title"},ea={class:"apply-list"},ta={class:"user-info"},oa=["src"],na=["title"],sa={class:"control-container"},aa=["onClick"],ia=["onClick"],ra={class:"apply-footer"},la=P({__name:"MasterApplyControl",setup(e){const{t}=oe(),o=me(),s=_e(),{handleUserApply:a,denyAllUserApply:r}=no(),{showApplyUserList:i}=X(o),{isMaster:u,applyToAnchorList:l}=X(s),I=w(),f=w(),g=A(()=>l.value.length>0);function v(){u.value&&o.setShowApplyUserList(!i.value)}function _(){o.setShowApplyUserList(!1)}function R(y){var h,x;i.value&&!((h=I.value)!=null&&h.$el.contains(y.target))&&!((x=f.value)!=null&&x.contains(y.target))&&o.setShowApplyUserList(!1)}return ke(()=>{document.addEventListener("click",R,!0)}),at(()=>{document.removeEventListener("click",R,!0)}),(y,h)=>(m(),S("div",Qs,[b(Te,{ref_key:"masterApplyControlRef",ref:I,title:n(t)("Raise hand"),"icon-name":n(Q).ApplyOnSeat,onClickIcon:v},null,8,["title","icon-name"]),ve(d("div",Js,[b(ie,{"icon-name":"apply-big-icon",class:"apply-big-icon"}),d("span",Ys,k(n(l).length),1)],512),[[he,n(g)&&!n(i)]]),ve(d("div",{ref_key:"masterApplyListRef",ref:f,class:"apply-list-container"},[d("div",Zs,[d("span",Xs,k(n(t)("Apply to stage application")),1),b(ie,{"icon-name":"close",size:"medium",class:"close",onClick:_})]),d("div",ea,[(m(!0),S(de,null,be(n(l),(x,j)=>(m(),S("div",{key:j,class:"apply-item"},[d("div",ta,[d("img",{class:"avatar-url",src:x.avatarUrl||n(kt)},null,8,oa),d("span",{class:"user-name",title:x.userName||x.userId},k(x.userName||x.userId),9,na)]),d("div",sa,[d("div",{class:"button primary",onClick:J=>n(a)(x.userId,!0)},k(n(t)("Agree")),9,aa),d("div",{class:"button outline",onClick:J=>n(a)(x.userId,!1)},k(n(t)("Reject")),9,ia)])]))),128))]),d("div",ra,[d("div",{class:"button outline deny-all",onClick:h[0]||(h[0]=(...x)=>n(r)&&n(r)(...x))},k(n(t)("Reject All")),1)])],512),[[he,n(i)]])]))}});const ua={class:"apply-control-container"},ca={class:"attention member-attention"},da={class:"info"},ma={class:"dialog-footer"},pa=P({__name:"MemberApplyControl",setup(e){const t=Se(),{t:o}=oe(),s=me(),a=_e(),{lang:r}=X(s),{localUser:i}=X(a),u=w(!1),l=w(!0),I=w(""),f=w(""),g=w(!1),v=w(0),_=w(0);re([i,u,r],([c,p])=>{c.onSeat?(I.value=Q.GoOffSeat,f.value=o("Step down")):p?(I.value=Q.ApplyActive,f.value=o("Hand down")):(I.value=Q.ApplyOnSeat,f.value=o("Raise hand"))},{immediate:!0,deep:!0});async function R(){j(),i.value.onSeat?x():u.value?h():y()}async function y(){var c;try{const p=await((c=t.instance)==null?void 0:c.takeSeat({seatIndex:-1,timeout:0,requestCallback:O=>{u.value=!1;const{requestCallbackType:H}=O;switch(H){case E.exports.TUIRequestCallbackType.kRequestAccepted:le({type:"success",message:o("The host has approved your application"),duration:ye.NORMAL});break;case E.exports.TUIRequestCallbackType.kRequestRejected:le({type:"warning",message:o("The host has rejected your application for the stage"),duration:ye.NORMAL});break;case E.exports.TUIRequestCallbackType.kRequestTimeout:break}}}));p&&(v.value=p),u.value=!0}catch(p){console.log("member sendSpeechApplication error",p)}}async function h(){var c;try{await((c=t.instance)==null?void 0:c.cancelRequest({requestId:v.value})),u.value=!1}catch(p){console.log("member cancelSpeechApplication",p)}}async function x(){var c;await((c=t.instance)==null?void 0:c.leaveSeat())}function j(){l.value=!1}async function J(c){const{request:{requestId:p,requestAction:O}}=c;O===E.exports.TUIRequestAction.kRequestRemoteUserOnSeat&&(_.value=p,g.value=!0)}function G(c){const{requestId:p}=c;_.value===p&&(_.value=0,g.value=!1)}async function C(c){var p;await((p=t.instance)==null?void 0:p.responseRemoteRequest({requestId:_.value,agree:c})),g.value=!1,c&&j()}return Le.once("ready",()=>{var c,p;(c=t.instance)==null||c.on(E.exports.TUIRoomEvents.onRequestReceived,J),(p=t.instance)==null||p.on(E.exports.TUIRoomEvents.onRequestCancelled,G)}),at(()=>{var c,p;(c=t.instance)==null||c.off(E.exports.TUIRoomEvents.onRequestReceived,J),(p=t.instance)==null||p.off(E.exports.TUIRoomEvents.onRequestCancelled,G)}),(c,p)=>{const O=Ye,H=it;return m(),S(de,null,[d("div",ua,[b(Te,{title:f.value,"icon-name":I.value,onClickIcon:R},null,8,["title","icon-name"]),ve(d("div",ca,[d("span",da,k(n(o)("Please raise your hand to apply")),1),b(ie,{"icon-name":"close",size:"medium",class:"close",onClick:j})],512),[[he,l.value]])]),b(H,{modelValue:g.value,"onUpdate:modelValue":p[2]||(p[2]=Y=>g.value=Y),title:n(o)("The host invites you to speak on stage"),class:"custom-element-class",modal:!1,"show-close":!1,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"500px"},{footer:V(()=>[d("span",ma,[b(O,{type:"primary",onClick:p[0]||(p[0]=Y=>C(!0))},{default:V(()=>[ce(k(n(o)("Agree")),1)]),_:1}),b(O,{onClick:p[1]||(p[1]=Y=>C(!1))},{default:V(()=>[ce(k(n(o)("Cancel")),1)]),_:1})])]),default:V(()=>[d("span",null,k(n(o)("After agreeing to go on stage, you can turn on the camera and microphone. Do you agree to go on stage?")),1)]),_:1},8,["modelValue","title"])],64)}}}),va=P({__name:"Index",setup(e){const t=_e();return(o,s)=>(m(),S(de,null,[n(t).isMaster?(m(),z(la,{key:0})):D("",!0),n(t).isMaster?D("",!0):(m(),z(pa,{key:1}))],64))}}),fa={class:"more-control-container"},_a=P({__name:"MoreControl",setup(e){const{t}=oe(),o=me(),{sidebarName:s}=X(o),a=A(()=>s.value==="more"?Q.MoreActive:Q.More);function r(){if(o.setSidebarOpenStatus&&o.sidebarName==="more"){o.setSidebarOpenStatus(!1),o.setSidebarName("");return}o.setSidebarOpenStatus(!0),o.setSidebarName("more")}return(i,u)=>(m(),S("div",fa,[b(Te,{title:n(t)("More"),"icon-name":n(a),onClickIcon:r},null,8,["title","icon-name"])]))}});const ga={class:"setting-control-container"},ha=P({__name:"SettingControl",setup(e){const{t}=oe(),o=me(),{showSettingDialog:s}=X(o),a=A(()=>s.value?Q.SettingActive:Q.Setting);function r(){o.setShowSettingDialog(!o.showSettingDialog)}return(i,u)=>(m(),S("div",ga,[b(Te,{title:n(t)("Settings"),"icon-name":n(a),onClick:r},null,8,["title","icon-name"])]))}});var ya=ue(ha,[["__scopeId","data-v-35b0e9c3"]]);const Ca={key:0},Ia={key:0},Ea={key:1},Ra={key:1},Sa={key:0},ba={key:1},Ta=P({__name:"EndControl",emits:["onExitRoom","onDestroyRoom"],setup(e,{emit:t}){const o=Se(),{t:s}=oe(),a="[EndControl]",r=w(0),i=w(!1),u=me();console.log(`${a} basicStore:`,u);const l=_e(),{localUser:I,remoteAnchorList:f}=X(l),g=A(()=>r.value===0?s("Leave room?"):s("Select a new host")),v=A(()=>l.isMaster&&f.value.length>0||!l.isMaster),_=w("");function R(){i.value=!1,r.value=0}function y(){i.value||(i.value=!0)}function h(){R()}async function x(){var c,p,O,H;I.value.hasAudioStream&&(await((c=o.instance)==null?void 0:c.closeLocalMicrophone()),await((p=o.instance)==null?void 0:p.stopPushLocalAudio())),I.value.hasVideoStream&&(await((O=o.instance)==null?void 0:O.closeLocalCamera()),await((H=o.instance)==null?void 0:H.stopPushLocalVideo()))}async function j(){var c;try{console.log(`${a}dismissRoom: enter`),await x(),await((c=o.instance)==null?void 0:c.destroyRoom()),R(),t("onDestroyRoom",{code:0,message:""})}catch(p){console.error(`${a}dismissRoom error:`,p)}}async function J(){var c;try{if(l.isMaster){r.value=1;return}await x();const p=await((c=o.instance)==null?void 0:c.exitRoom());console.log(`${a}leaveRoom:`,p),R(),t("onExitRoom",{code:0,message:""})}catch(p){console.error(`${a}leaveRoom error:`,p)}}async function G(){var c,p;if(!!_.value)try{const O=_.value,H=await((c=o.instance)==null?void 0:c.changeUserRole({userId:O,role:E.exports.TUIRole.kRoomOwner}));console.log(`${a}transferAndLeave:`,H),await x();const Y=await((p=o.instance)==null?void 0:p.exitRoom());console.log(`${a}exitRoom:`,Y),R(),t("onExitRoom",{code:0,message:""})}catch(O){console.error(`${a}transferAndLeave error:`,O)}}const C=async c=>{try{const{roomId:p}=c;console.log(`${a}onRoomDismissed:`,p),He.alert(s("The host closed the room."),s("Note"),{customClass:"custom-element-class",confirmButtonText:s("Confirm"),callback:async()=>{R(),t("onDestroyRoom",{code:0,message:""})}})}catch(p){console.error(`${a}onRoomDestroyed error:`,p)}};return re(()=>l.masterUserId,(c,p)=>{if(p!==""&&c!==""&&c!==p){let O=l.getUserName(c)||c;c===I.value.userId&&(O=s("me"));const H=`${s("Moderator changed to ")}${O}`;le({type:"success",message:H}),l.localUser.userId===c?l.setLocalUser({role:E.exports.TUIRole.kRoomOwner}):l.setRemoteUserRole(c,E.exports.TUIRole.kRoomOwner),R()}}),Le.once("ready",()=>{var c;(c=o.instance)==null||c.on(E.exports.TUIRoomEvents.onRoomDismissed,C)}),$e(()=>{var c;(c=o.instance)==null||c.off(E.exports.TUIRoomEvents.onRoomDismissed,C)}),(c,p)=>{const O=Ao,H=wo,Y=Ye,se=it;return m(),S(de,null,[d("div",{class:"end-button",tabindex:"1",onClick:y},k(n(s)("End")),1),b(se,{"model-value":i.value,class:"custom-element-class",title:n(g),modal:!0,"append-to-body":!1,width:"420px","before-close":h},{footer:V(()=>[r.value===0?(m(),S("div",Sa,[n(l).isMaster?(m(),z(Y,{key:0,type:"primary",onClick:j},{default:V(()=>[ce(k(n(s)("Dismiss")),1)]),_:1})):D("",!0),n(v)?(m(),z(Y,{key:1,type:"primary",onClick:J},{default:V(()=>[ce(k(n(s)("Leave")),1)]),_:1})):D("",!0),b(Y,{onClick:h},{default:V(()=>[ce(k(n(s)("Cancel")),1)]),_:1})])):D("",!0),r.value===1?(m(),S("div",ba,[b(Y,{type:"primary",onClick:G},{default:V(()=>[ce(k(n(s)("Transfer and leave")),1)]),_:1}),b(Y,{onClick:h},{default:V(()=>[ce(k(n(s)("Cancel")),1)]),_:1})])):D("",!0)]),default:V(()=>[r.value===0?(m(),S("div",Ca,[n(l).isMaster?(m(),S("span",Ia,k(n(s)('You are currently the room host, please select the appropriate action.If you select "Leave Room", the room will not be dissolved and you will need to appoint a new host.')),1)):(m(),S("span",Ea,k(n(s)("Are you sure you want to leave this room?")),1))])):D("",!0),r.value===1?(m(),S("div",Ra,[d("div",null,k(n(s)("New host")),1),d("div",null,[b(H,{modelValue:_.value,"onUpdate:modelValue":p[0]||(p[0]=ge=>_.value=ge),teleported:!1},{default:V(()=>[(m(!0),S(de,null,be(n(f),ge=>(m(),z(O,{key:ge.userId,value:ge.userId,label:ge.userName},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])])])):D("",!0)]),_:1},8,["model-value","title"])],64)}}});var ka=ue(Ta,[["__scopeId","data-v-170ff5ec"]]);const xa={class:"footer-container"},Aa={class:"left-container"},wa={class:"center-container"},La={class:"right-container"},$a=P({__name:"index",emits:["onDestroyRoom","onExitRoom"],setup(e,{emit:t}){const o=_e(),s=i=>{t("onDestroyRoom",i),Me.reportEvent({name:"destroyRoom",ext1:"destroyRoom-success"})},a=i=>{t("onExitRoom",i),Me.reportEvent({name:"exitRoom",ext1:"exitRoom-success"})};function r(i){Me.reportEvent({name:i,ext1:i})}return(i,u)=>(m(),S("div",xa,[d("div",Aa,[b(Ds,{onClick:u[0]||(u[0]=l=>r("audioControl"))}),b(Gs,{onClick:u[1]||(u[1]=l=>r("videoControl"))})]),d("div",wa,[b(Bs,{onClick:u[2]||(u[2]=l=>r("screenShareControl"))}),b(js,{onClick:u[3]||(u[3]=l=>r("fullScreenControl"))}),n(o).isMaster?(m(),z(zs,{key:0,onClick:u[4]||(u[4]=l=>r("manageMemberControl"))})):D("",!0),b(Vs,{onClick:u[5]||(u[5]=l=>r("inviteControl"))}),b(Ws,{onClick:u[6]||(u[6]=l=>r("chatControl"))}),n(o).enableSeatControl?(m(),z(va,{key:1,onClick:u[7]||(u[7]=l=>r("applyControl"))})):D("",!0),b(_a,{onClick:u[8]||(u[8]=l=>r("moreControl"))}),b(ya,{onClick:u[9]||(u[9]=l=>r("settingControl"))})]),d("div",La,[b(ka,{onOnDestroyRoom:s,onOnExitRoom:a})])]))}});var Ua=ue($a,[["__scopeId","data-v-ec9a599e"]]);const so="https://web.sdk.qcloud.com/im/assets/emoji/",bt={"[NO]":"emoji_0@2x.png","[OK]":"emoji_1@2x.png","[\u4E0B\u96E8]":"emoji_2@2x.png","[\u4E48\u4E48\u54D2]":"emoji_3@2x.png","[\u4E52\u4E53]":"emoji_4@2x.png","[\u4FBF\u4FBF]":"emoji_5@2x.png","[\u4FE1\u5C01]":"emoji_6@2x.png","[\u5077\u7B11]":"emoji_7@2x.png","[\u50B2\u6162]":"emoji_8@2x.png","[\u518D\u89C1]":"emoji_9@2x.png","[\u51B7\u6C57]":"emoji_10@2x.png","[\u51CB\u8C22]":"emoji_11@2x.png","[\u5200]":"emoji_12@2x.png","[\u5220\u9664]":"emoji_13@2x.png","[\u52FE\u5F15]":"emoji_14@2x.png","[\u53D1\u5446]":"emoji_15@2x.png","[\u53D1\u6296]":"emoji_16@2x.png","[\u53EF\u601C]":"emoji_17@2x.png","[\u53EF\u7231]":"emoji_18@2x.png","[\u53F3\u54FC\u54FC]":"emoji_19@2x.png","[\u53F3\u592A\u6781]":"emoji_20@2x.png","[\u53F3\u8F66\u5934]":"emoji_21@2x.png","[\u5410]":"emoji_22@2x.png","[\u5413]":"emoji_23@2x.png","[\u5492\u9A82]":"emoji_24@2x.png","[\u5496\u5561]":"emoji_25@2x.png","[\u5564\u9152]":"emoji_26@2x.png","[\u5618]":"emoji_27@2x.png","[\u56DE\u5934]":"emoji_28@2x.png","[\u56F0]":"emoji_29@2x.png","[\u574F\u7B11]":"emoji_30@2x.png","[\u591A\u4E91]":"emoji_31@2x.png","[\u5927\u5175]":"emoji_32@2x.png","[\u5927\u54ED]":"emoji_33@2x.png","[\u592A\u9633]":"emoji_34@2x.png","[\u594B\u6597]":"emoji_35@2x.png","[\u5976\u74F6]":"emoji_36@2x.png","[\u59D4\u5C48]":"emoji_37@2x.png","[\u5BB3\u7F9E]":"emoji_38@2x.png","[\u5C34\u5C2C]":"emoji_39@2x.png","[\u5DE6\u54FC\u54FC]":"emoji_40@2x.png","[\u5DE6\u592A\u6781]":"emoji_41@2x.png","[\u5DE6\u8F66\u5934]":"emoji_42@2x.png","[\u5DEE\u52B2]":"emoji_43@2x.png","[\u5F31]":"emoji_44@2x.png","[\u5F3A]":"emoji_45@2x.png","[\u5F69\u5E26]":"emoji_46@2x.png","[\u5F69\u7403]":"emoji_47@2x.png","[\u5F97\u610F]":"emoji_48@2x.png","[\u5FAE\u7B11]":"emoji_49@2x.png","[\u5FC3\u788E\u4E86]":"emoji_50@2x.png","[\u5FEB\u54ED\u4E86]":"emoji_51@2x.png","[\u6004\u706B]":"emoji_52@2x.png","[\u6012]":"emoji_53@2x.png","[\u60CA\u6050]":"emoji_54@2x.png","[\u60CA\u8BB6]":"emoji_55@2x.png","[\u61A8\u7B11]":"emoji_56@2x.png","[\u624B\u67AA]":"emoji_57@2x.png","[\u6253\u54C8\u6B20]":"emoji_58@2x.png","[\u6293\u72C2]":"emoji_59@2x.png","[\u6298\u78E8]":"emoji_60@2x.png","[\u62A0\u9F3B]":"emoji_61@2x.png","[\u62B1\u62B1]":"emoji_62@2x.png","[\u62B1\u62F3]":"emoji_63@2x.png","[\u62F3\u5934]":"emoji_64@2x.png","[\u6325\u624B]":"emoji_65@2x.png","[\u63E1\u624B]":"emoji_66@2x.png","[\u6487\u5634]":"emoji_67@2x.png","[\u64E6\u6C57]":"emoji_68@2x.png","[\u6572\u6253]":"emoji_69@2x.png","[\u6655]":"emoji_70@2x.png","[\u6708\u4EAE]":"emoji_71@2x.png","[\u68D2\u68D2\u7CD6]":"emoji_72@2x.png","[\u6C7D\u8F66]":"emoji_73@2x.png","[\u6C99\u53D1]":"emoji_74@2x.png","[\u6D41\u6C57]":"emoji_75@2x.png","[\u6D41\u6CEA]":"emoji_76@2x.png","[\u6FC0\u52A8]":"emoji_77@2x.png","[\u706F\u6CE1]":"emoji_78@2x.png","[\u70B8\u5F39]":"emoji_79@2x.png","[\u718A\u732B]":"emoji_80@2x.png","[\u7206\u7B4B]":"emoji_81@2x.png","[\u7231\u4F60]":"emoji_82@2x.png","[\u7231\u5FC3]":"emoji_83@2x.png","[\u7231\u60C5]":"emoji_84@2x.png","[\u732A\u5934]":"emoji_85@2x.png","[\u732B\u54AA]":"emoji_86@2x.png","[\u732E\u543B]":"emoji_87@2x.png","[\u73AB\u7470]":"emoji_88@2x.png","[\u74E2\u866B]":"emoji_89@2x.png","[\u7591\u95EE]":"emoji_90@2x.png","[\u767D\u773C]":"emoji_91@2x.png","[\u76AE\u7403]":"emoji_92@2x.png","[\u7761\u89C9]":"emoji_93@2x.png","[\u78D5\u5934]":"emoji_94@2x.png","[\u793A\u7231]":"emoji_95@2x.png","[\u793C\u54C1\u888B]":"emoji_96@2x.png","[\u793C\u7269]":"emoji_97@2x.png","[\u7BEE\u7403]":"emoji_98@2x.png","[\u7C73\u996D]":"emoji_99@2x.png","[\u7CD7\u5927\u4E86]":"emoji_100@2x.png","[\u7EA2\u53CC\u559C]":"emoji_101@2x.png","[\u7EA2\u706F\u7B3C]":"emoji_102@2x.png","[\u7EB8\u5DFE]":"emoji_103@2x.png","[\u80DC\u5229]":"emoji_104@2x.png","[\u8272]":"emoji_105@2x.png","[\u836F]":"emoji_106@2x.png","[\u83DC\u5200]":"emoji_107@2x.png","[\u86CB\u7CD5]":"emoji_108@2x.png","[\u8721\u70DB]":"emoji_109@2x.png","[\u8857\u821E]":"emoji_110@2x.png","[\u8870]":"emoji_111@2x.png","[\u897F\u74DC]":"emoji_112@2x.png","[\u8C03\u76AE]":"emoji_113@2x.png","[\u8C61\u68CB]":"emoji_114@2x.png","[\u8DF3\u7EF3]":"emoji_115@2x.png","[\u8DF3\u8DF3]":"emoji_116@2x.png","[\u8F66\u53A2]":"emoji_117@2x.png","[\u8F6C\u5708]":"emoji_118@2x.png","[\u9119\u89C6]":"emoji_119@2x.png","[\u9177]":"emoji_120@2x.png","[\u949E\u7968]":"emoji_121@2x.png","[\u94BB\u6212]":"emoji_122@2x.png","[\u95EA\u7535]":"emoji_123@2x.png","[\u95ED\u5634]":"emoji_124@2x.png","[\u95F9\u949F]":"emoji_125@2x.png","[\u9634\u9669]":"emoji_126@2x.png","[\u96BE\u8FC7]":"emoji_127@2x.png","[\u96E8\u4F1E]":"emoji_128@2x.png","[\u9752\u86D9]":"emoji_129@2x.png","[\u9762\u6761]":"emoji_130@2x.png","[\u97AD\u70AE]":"emoji_131@2x.png","[\u98CE\u8F66]":"emoji_132@2x.png","[\u98DE\u543B]":"emoji_133@2x.png","[\u98DE\u673A]":"emoji_134@2x.png","[\u9965\u997F]":"emoji_135@2x.png","[\u9999\u8549]":"emoji_136@2x.png","[\u9AB7\u9AC5]":"emoji_137@2x.png","[\u9EA6\u514B\u98CE]":"emoji_138@2x.png","[\u9EBB\u5C06]":"emoji_139@2x.png","[\u9F13\u638C]":"emoji_140@2x.png","[\u9F87\u7259]":"emoji_141@2x.png"},Da=["[\u9F87\u7259]","[\u8C03\u76AE]","[\u6D41\u6C57]","[\u5077\u7B11]","[\u518D\u89C1]","[\u6572\u6253]","[\u64E6\u6C57]","[\u732A\u5934]","[\u73AB\u7470]","[\u6D41\u6CEA]","[\u5927\u54ED]","[\u5618]","[\u9177]","[\u6293\u72C2]","[\u59D4\u5C48]","[\u4FBF\u4FBF]","[\u70B8\u5F39]","[\u83DC\u5200]","[\u53EF\u7231]","[\u8272]","[\u5BB3\u7F9E]","[\u5F97\u610F]","[\u5410]","[\u5FAE\u7B11]","[\u6012]","[\u5C34\u5C2C]","[\u60CA\u6050]","[\u51B7\u6C57]","[\u7231\u5FC3]","[\u793A\u7231]","[\u767D\u773C]","[\u50B2\u6162]","[\u96BE\u8FC7]","[\u60CA\u8BB6]","[\u7591\u95EE]","[\u56F0]","[\u4E48\u4E48\u54D2]","[\u61A8\u7B11]","[\u7231\u60C5]","[\u8870]","[\u6487\u5634]","[\u9634\u9669]","[\u594B\u6597]","[\u53D1\u5446]","[\u53F3\u54FC\u54FC]","[\u62B1\u62B1]","[\u574F\u7B11]","[\u98DE\u543B]","[\u9119\u89C6]","[\u6655]","[\u5927\u5175]","[\u53EF\u601C]","[\u5F3A]","[\u5F31]","[\u63E1\u624B]","[\u80DC\u5229]","[\u62B1\u62F3]","[\u51CB\u8C22]","[\u7C73\u996D]","[\u86CB\u7CD5]","[\u897F\u74DC]","[\u5564\u9152]","[\u74E2\u866B]","[\u52FE\u5F15]","[OK]","[\u7231\u4F60]","[\u5496\u5561]","[\u6708\u4EAE]","[\u5200]","[\u53D1\u6296]","[\u5DEE\u52B2]","[\u62F3\u5934]","[\u5FC3\u788E\u4E86]","[\u592A\u9633]","[\u793C\u7269]","[\u76AE\u7403]","[\u9AB7\u9AC5]","[\u6325\u624B]","[\u95EA\u7535]","[\u9965\u997F]","[\u5492\u9A82]","[\u6298\u78E8]","[\u62A0\u9F3B]","[\u9F13\u638C]","[\u7CD7\u5927\u4E86]","[\u5DE6\u54FC\u54FC]","[\u6253\u54C8\u6B20]","[\u5FEB\u54ED\u4E86]","[\u5413]","[\u7BEE\u7403]","[\u4E52\u4E53]","[NO]","[\u8DF3\u8DF3]","[\u6004\u706B]","[\u8F6C\u5708]","[\u78D5\u5934]","[\u56DE\u5934]","[\u8DF3\u7EF3]","[\u6FC0\u52A8]","[\u8857\u821E]","[\u732E\u543B]","[\u5DE6\u592A\u6781]","[\u53F3\u592A\u6781]","[\u95ED\u5634]","[\u732B\u54AA]","[\u7EA2\u53CC\u559C]","[\u97AD\u70AE]","[\u7EA2\u706F\u7B3C]","[\u9EBB\u5C06]","[\u9EA6\u514B\u98CE]","[\u793C\u54C1\u888B]","[\u4FE1\u5C01]","[\u8C61\u68CB]","[\u5F69\u5E26]","[\u8721\u70DB]","[\u7206\u7B4B]","[\u68D2\u68D2\u7CD6]","[\u5976\u74F6]","[\u9762\u6761]","[\u9999\u8549]","[\u98DE\u673A]","[\u5DE6\u8F66\u5934]","[\u8F66\u53A2]","[\u53F3\u8F66\u5934]","[\u591A\u4E91]","[\u4E0B\u96E8]","[\u949E\u7968]","[\u718A\u732B]","[\u706F\u6CE1]","[\u98CE\u8F66]","[\u95F9\u949F]","[\u96E8\u4F1E]","[\u5F69\u7403]","[\u94BB\u6212]","[\u6C99\u53D1]","[\u7EB8\u5DFE]","[\u624B\u67AA]","[\u9752\u86D9]"];function Ma(e){const t=[];let o=e,s=-1,a=-1;for(;o!=="";)switch(s=o.indexOf("["),a=o.indexOf("]"),s){case 0:if(a===-1)t.push({name:"text",text:o}),o="";else{const r=o.slice(0,a+1);bt[r]?(t.push({name:"img",src:so+bt[r]}),o=o.substring(a+1)):(t.push({name:"text",text:"["}),o=o.slice(1))}break;case-1:t.push({name:"text",text:o}),o="";break;default:t.push({name:"text",text:o.slice(0,s)}),o=o.substring(s);break}return t}const Oa={key:0,class:"text-box"},Ba=["src"],Na=P({__name:"MessageText",props:["data"],setup(e){const t=e,o=s=>Ma(s);return(s,a)=>(m(!0),S(de,null,be(o(t.data),(r,i)=>(m(),S(de,{key:i},[r.name==="text"?(m(),S("span",Oa,k(r.text),1)):r.name==="img"?(m(),S("img",{key:1,class:"text-img",src:r.src},null,8,Ba)):D("",!0)],64))),128))}});var ja=ue(Na,[["__scopeId","data-v-15e054f5"]]);const Fa={class:"message-list-container"},Va={class:"message-list"},qa=["title"],Pa={class:"message-body"},Ga=P({__name:"MessageList",setup(e){const{t}=oe(),o=ut(),{messageList:s}=X(o),a=w(null);let r=!1;const i=l=>{const I=l.target;I.scrollHeight-I.scrollTop-I.clientHeight>80?r=!0:r=!1};re(s,async(l,I)=>{if(await Re(),r){l.length>=1&&l[l.length-1].flow==="out"&&a.value&&a.value.scrollIntoView();return}a.value&&a.value.scrollIntoView()});async function u(l,I){try{if(I)return}catch{le.error(t("Failed to get chat message"))}}return ke(()=>{u("",!1),window.addEventListener("scroll",i,!0)}),$e(()=>{window.removeEventListener("scroll",i,!0)}),(l,I)=>(m(),S("div",Fa,[d("div",Va,[(m(!0),S(de,null,be(n(s),f=>(m(),S("div",{key:f.ID,class:K(["message-item",`${f.flow==="out"?"is-me":""}`])},[d("div",{class:"message-header",title:f.nick||f.from},k(f.nick||f.from),9,qa),d("div",Pa,[f.type==="TIMTextElem"?(m(),z(ja,{key:0,data:f.payload.text},null,8,["data"])):D("",!0)])],2))),128))]),d("div",{ref_key:"messageBottomEl",ref:a,class:"message-bottom"},null,512)]))}});var Ha=ue(Ga,[["__scopeId","data-v-bbea56ce"]]);const za={class:"emoji-tool"},Ka={class:"emoji-list"},Wa=["onClick"],Qa=["src"],Ja=P({__name:"emoji",emits:["chooseEmoji"],setup(e,{emit:t}){const o=w(!1),s=u=>{const l=u;i(),t("chooseEmoji",l)},a=u=>{u.target.closest(".emoji-popover")||i()},r=()=>{o.value=!o.value},i=()=>{o.value=!1};return(u,l)=>{const I=Cn;return m(),S("div",za,[b(I,{visible:o.value,"onUpdate:visible":l[0]||(l[0]=f=>o.value=f),"popper-class":"emoji-popover",placement:"top",width:400,"show-arrow":!1,teleported:!1},{reference:V(()=>[ve(b(ie,{class:"arrow emoji-icon","icon-name":"emoji",size:"medium",onClick:r},null,512),[[n(Wo),a]])]),default:V(()=>[d("div",Ka,[(m(!0),S(de,null,be(n(Da),(f,g)=>(m(),S("div",{key:g,class:"emoji-item",onClick:v=>s(f)},[d("img",{src:n(so)+n(bt)[f]},null,8,Qa)],8,Wa))),128))])]),_:1},8,["visible"])])}}});var Ya=ue(Ja,[["__scopeId","data-v-0bc78d1e"]]);const Za=["disabled","placeholder","onKeyup"],Xa={key:0,class:"chat-editor-toolbar"},ei={class:"left-section"},ti=P({__name:"ChatEditor",setup(e){const t=Se(),{t:o}=oe(),s=ut(),a=_e(),{isMuteChatByMater:r}=X(s),{enableMessage:i}=X(a),u=w(),l=w("");re(r,v=>{v&&(l.value="")}),re(i,v=>{v||(l.value="")});const I=A(()=>Boolean(r.value||!i.value)),f=async()=>{var _;const v=l.value.replace(`
`,"");if(l.value="",v!=="")try{await((_=t.instance)==null?void 0:_.sendTextMessage({messageText:v})),s.updateMessageList({ID:Math.random().toString(),type:"TIMTextElem",payload:{text:v},nick:a.localUser.userName||a.localUser.userId,from:a.localUser.userId,flow:"out",sequence:Math.random()})}catch{le.error(o("Failed to send the message"))}},g=v=>{l.value+=v,u.value.focus()};return(v,_)=>(m(),S("div",{class:K(["chat-editor",n(I)?"disable-editor":""])},[ve(d("textarea",{ref_key:"editorInputEle",ref:u,"onUpdate:modelValue":_[0]||(_[0]=R=>l.value=R),class:"content-bottom-input",disabled:n(I),placeholder:n(I)?n(o)("Muted by the moderator"):n(o)("Type a message"),onKeyup:We(f,["enter"])},null,40,Za),[[ho,l.value]]),n(I)?D("",!0):(m(),S("div",Xa,[d("div",ei,[b(Ya,{onChooseEmoji:g})]),d("div",{class:K(["send-btn",`${l.value.length>0?"active":""}`]),onClick:f},k(n(o)("Send")),3)]))],2))}});var oi=ue(ti,[["__scopeId","data-v-c2f784ba"]]);const ni={class:"chat-container"},si=P({__name:"index",setup(e){return(t,o)=>(m(),S("div",ni,[b(Ha),b(oi)]))}});var ai=ue(si,[["__scopeId","data-v-842ad7d0"]]);const ii={class:"invite-container"},ri={class:"invite-notice"},li={class:"invite-content"},ui={class:"invite-item"},ci={class:"invite-title"},di={class:"input-area"},mi=["value"],pi={key:0,class:"invite-item"},vi={class:"invite-title"},fi={class:"input-area"},_i=["value"],gi={class:"invite-item"},hi={class:"invite-title"},yi={class:"input-area"},Ci=["value"],Ii=P({__name:"index",setup(e){const{t}=oe(),o=w(!0),s=me(),{roomId:a}=X(s),{origin:r,pathname:i}=location,u=Tt();ke(()=>{window.__TRTCElectron&&(o.value=!1)});let l=A(()=>`${r}${i}#/home?roomId=${a.value}`);u&&(l=A(()=>`https://web.sdk.qcloud.com/trtc/webrtc/test/xinli-test/tuiroom-wasm/index.html#home?roomId=${a.value}`));const I=A(()=>`tuiroom://joinroom?roomId=${a.value}`);function f(g){navigator.clipboard.writeText(`${g}`),le({message:t("Copied successfully"),type:"success"})}return(g,v)=>(m(),S("div",ii,[d("div",ri,k(n(t)("Share the room ID or invite link")),1),d("div",li,[d("div",ui,[d("span",ci,k(n(t)("Invite by room number")),1),d("div",di,[d("input",{class:"input",type:"text",value:n(a)},null,8,mi),b(ie,{"icon-name":"copy-icon",class:"copy",onClick:v[0]||(v[0]=_=>f(n(a)))})])]),o.value?(m(),S("div",pi,[d("span",vi,k(n(t)("Invite via room link")),1),d("div",fi,[d("input",{class:"input",type:"text",value:n(l)},null,8,_i),b(ie,{"icon-name":"copy-icon",class:"copy",onClick:v[1]||(v[1]=_=>f(n(l)))})])])):D("",!0),d("div",gi,[d("span",hi,k(n(t)("Invite via client scheme")),1),d("div",yi,[d("input",{class:"input",type:"text",value:n(I)},null,8,Ci),b(ie,{"icon-name":"copy-icon",class:"copy",onClick:v[2]||(v[2]=_=>f(n(I)))})])])])]))}});var Ei=ue(Ii,[["__scopeId","data-v-bc2e3d54"]]);const Ri={class:"more-container"},Si={class:"more-notice"},bi={class:"more-content"},Ti={class:"more-item"},ki={class:"more-title"},xi={class:"input-area"},Ai={class:"more-item"},wi={class:"more-title"},Li={class:"input-area"},$i=P({__name:"index",setup(e){const{t}=oe(),o="592465424",s="tylerding@tencent.com";function a(r){navigator.clipboard.writeText(`${r}`),le({message:t("Copied successfully"),type:"success"})}return(r,i)=>(m(),S("div",Ri,[d("div",Si,k(n(t)("Join our QQ group chat or email us.")),1),d("div",bi,[d("div",Ti,[d("span",ki,"QQ "+k(n(t)("group chat")),1),d("div",xi,[d("input",{class:"input",type:"text",value:o}),b(ie,{"icon-name":"copy-icon",class:"copy",onClick:i[0]||(i[0]=u=>a(o))})])]),d("div",Ai,[d("span",wi,k(n(t)("Email")),1),d("div",Li,[d("input",{class:"input",type:"text",value:s}),b(ie,{"icon-name":"copy-icon",class:"copy",onClick:i[1]||(i[1]=u=>a(s))})])])])]))}});var Ui=ue($i,[["__scopeId","data-v-0aba70a1"]]);const Di={class:"member-basic-info"},Mi=["src"],Oi={class:"user-name"},Bi={key:0,class:"user-extra-info"},Ni={key:1,class:"user-extra-info"},ji={key:2,class:"user-extra-info"},Fi={key:0,class:"member-av-state"},Vi={key:0},qi={key:1},Pi={key:2},Gi=P({__name:"memberInfo",props:{userInfo:null,showMemberControl:null},setup(e){const t=e,{t:o}=oe(),s=me(),a=_e(),{isMaster:r}=X(a),i=A(()=>s.userId===t.userInfo.userId);return(u,l)=>(m(),S(de,null,[d("div",Di,[d("img",{class:"avatar-url",src:e.userInfo.avatarUrl||n(kt)},null,8,Mi),d("div",Oi,k(e.userInfo.userName||e.userInfo.userId),1),n(r)&&n(i)?(m(),S("div",Bi,k(n(o)("Host"))+", "+k(n(o)("Me")),1)):n(i)?(m(),S("div",Ni,k(n(o)("Me")),1)):n(s).masterUserId===e.userInfo.userId?(m(),S("div",ji,k(n(o)("Host")),1)):D("",!0)]),!n(i)&&!e.showMemberControl?(m(),S("div",Fi,[e.userInfo.onSeat?(m(),S("div",Vi,[b(ie,{class:"setting-icon","icon-name":e.userInfo.hasAudioStream?n(Q).MicOn:n(Q).MicOff,size:"large"},null,8,["icon-name"]),b(ie,{class:"setting-icon video-icon","icon-name":e.userInfo.hasVideoStream?n(Q).CameraOn:n(Q).CameraOff,size:"large"},null,8,["icon-name"])])):D("",!0),!e.userInfo.onSeat&&!e.userInfo.isUserApplyingToAnchor?(m(),S("div",qi,[b(ie,{class:"setting-icon","icon-name":n(Q).MicOffDisabled,size:"large"},null,8,["icon-name"]),b(ie,{class:"setting-icon video-icon","icon-name":n(Q).CameraOffDisabled,size:"large"},null,8,["icon-name"])])):D("",!0),!e.userInfo.onSeat&&e.userInfo.isUserApplyingToAnchor?(m(),S("div",Pi,[b(ie,{"icon-name":"apply-active"})])):D("",!0)])):D("",!0)],64))}});const Hi={key:0,class:"member-control-container"},zi={class:"more-container"},Ki={class:"user-operate-list"},Wi=["onClick"],Qi=P({__name:"memberControl",props:{userInfo:null},setup(e){const t=e,o=Se(),{t:s}=oe(),a=me(),r=_e(),{agreeUserOnStage:i,denyUserOnStage:u,inviteUserOnStage:l,cancelInviteUserOnStage:I,kickUserOffStage:f}=no(),g=w(!1),v=A(()=>a.userId===t.userInfo.userId),_=A(()=>t.userInfo.onSeat===!0),R=A(()=>t.userInfo.onSeat!==!0),y=A(()=>r.enableSeatControl===!1),h=A(()=>r.enableSeatControl===!0),x=A(()=>{const B={title:"",func:ae=>{}};return y.value?(B.title=t.userInfo.hasAudioStream?s("Mute"):t.userInfo.isRequestingUserOpenMic?s("Cancel Unmute"):s("Unmute"),B.func=ge):h.value&&(_.value?(B.title=t.userInfo.hasAudioStream?s("Mute"):t.userInfo.isRequestingUserOpenMic?s("Cancel Unmute"):s("Unmute"),B.func=ge):R.value&&(t.userInfo.isUserApplyingToAnchor?(B.title=s("Agree to the stage"),B.func=i):(B.title=t.userInfo.isInvitingUserToAnchor?s("Cancel stage"):s("Invite stage"),B.func=se))),B}),j=A(()=>({title:s("Refuse stage"),func:u})),J=A(()=>({title:s("Step down"),func:f})),G=A(()=>t.userInfo.hasVideoStream?s("Disable video"):t.userInfo.isRequestingUserOpenCamera?s("Cancel Enable video"):s("Enable video")),C=A(()=>({title:G.value,func:ee})),c=A(()=>t.userInfo.isChatMutedByMaster?s("Enable chat"):s("Disable chat")),p=A(()=>({title:c.value,func:Ce})),O=A(()=>({title:s("Kick out"),func:Ee})),H=A(()=>{const B=[p.value,O.value];return y.value&&B.unshift(C.value),_.value&&h.value&&(B.unshift(C.value),B.splice(1,0,J.value)),R.value&&t.userInfo.isUserApplyingToAnchor&&B.splice(0,0,j.value),B});function Y(){g.value=!g.value}async function se(B){const{isInvitingUserToAnchor:ae}=B;ae?I(B):l(B)}async function ge(B){var ae,fe,Ie;if(B.hasAudioStream)await((ae=o.instance)==null?void 0:ae.closeRemoteMicrophone({userId:B.userId}));else if(B.isRequestingUserOpenMic){const pe=B.requestUserOpenMicRequestId;pe&&await((fe=o.instance)==null?void 0:fe.cancelRequest({requestId:pe})),r.setRequestUserOpenMic({userId:B.userId,isRequesting:!1})}else{const pe=await((Ie=o.instance)==null?void 0:Ie.requestToOpenRemoteMicrophone({userId:B.userId,timeout:0,requestCallback:()=>{r.setRequestUserOpenMic({userId:B.userId,isRequesting:!1})}}));pe&&r.setRequestUserOpenMic({userId:B.userId,isRequesting:!0,requestId:pe})}}async function ee(B){var ae,fe,Ie;if(B.hasVideoStream)await((ae=o.instance)==null?void 0:ae.closeRemoteCamera({userId:B.userId}));else if(B.isRequestingUserOpenCamera){const pe=B.requestUserOpenCameraRequestId;pe&&await((fe=o.instance)==null?void 0:fe.cancelRequest({requestId:pe})),r.setRequestUserOpenCamera({userId:B.userId,isRequesting:!1})}else{const pe=await((Ie=o.instance)==null?void 0:Ie.requestToOpenRemoteCamera({userId:B.userId,timeout:0,requestCallback:()=>{r.setRequestUserOpenCamera({userId:B.userId,isRequesting:!1})}}));pe&&r.setRequestUserOpenCamera({userId:B.userId,isRequesting:!0,requestId:pe})}}function Ce(B){var fe,Ie;const ae=B.isChatMutedByMaster;r.setMuteUserChat(B.userId,!ae),ae?(fe=o.instance)==null||fe.unmuteRemoteUser({userId:B.userId}):(Ie=o.instance)==null||Ie.muteRemoteUser({userId:B.userId,duration:24*60*60})}function Ee(B){var ae;(ae=o.instance)==null||ae.kickOutRemoteUser({userId:B.userId})}return(B,ae)=>n(v)?D("",!0):(m(),S("div",Hi,[d("div",{class:"mute-btn",onClick:ae[0]||(ae[0]=fe=>n(x).func(e.userInfo))},k(n(x).title),1),d("div",zi,[d("div",{class:"more-btn",onClick:Y},[ce(k(n(s)("More"))+" ",1),b(ie,{class:"more-icon","icon-name":n(Q).ArrowBorderDown},null,8,["icon-name"])]),ve(d("div",Ki,[(m(!0),S(de,null,be(n(H),(fe,Ie)=>(m(),S("div",{key:Ie,class:"user-operate-item",onClick:pe=>fe.func(e.userInfo)},k(fe.title),9,Wi))),128))],512),[[he,g.value]])])]))}});const Ji=P({__name:"index",props:{userInfo:null},setup(e){const t=w(!1);function o(){t.value=!0}function s(){t.value=!1}return(a,r)=>e.userInfo.userId.indexOf("share_")<0?(m(),S("div",{key:0,class:"member-item-container",onMouseenter:o,onMouseleave:s},[b(Gi,{"user-info":e.userInfo,"show-member-control":t.value},null,8,["user-info","show-member-control"]),ve(b(Qi,{"user-info":e.userInfo},null,8,["user-info"]),[[he,t.value]])],32)):D("",!0)}});const Yi={class:"manage-member-container"},Zi={key:0,class:"apply-on-stage-info"},Xi={class:"apply-info"},er={class:"global-setting"},tr={class:"setting-item"},or={class:"item-left-section"},nr={class:"setting-name"},sr={class:"item-right-section"},ar={class:"setting-item"},ir={class:"item-left-section"},rr={class:"setting-name"},lr={class:"item-right-section"},ur=d("div",{class:"divide-line"},null,-1),cr={class:"member-list-container"},dr={class:"member-list-header"},mr={class:"member-count"},pr={class:"member-list-content"},vr=P({__name:"index",setup(e){const t=Se(),{t:o}=oe(),s=me(),a=_e(),{userList:r,userNumber:i,applyToAnchorList:u}=X(a);function l(){s.setShowApplyUserList(!0)}async function I(){var v;const g=!a.enableAudio;await((v=t.instance)==null?void 0:v.updateRoomInfo({enableAudio:g})),a.setEnableAudio(g)}async function f(){var v;const g=!a.enableVideo;await((v=t.instance)==null?void 0:v.updateRoomInfo({enableVideo:g})),a.setEnableVideo(g)}return(g,v)=>{const _=Ln;return m(),S("div",Yi,[n(u).length>0?(m(),S("div",Zi,[d("div",Xi,k(`${n(u)[0].userName||n(u)[0].userId} ${n(o)("Applying for the stage")}`),1),d("div",{class:"button",onClick:l},k(n(o)("Check")),1)])):D("",!0),d("div",er,[d("div",tr,[d("div",or,[b(ie,{class:"setting-icon","icon-name":n(Q).MicOn,size:"large"},null,8,["icon-name"]),d("span",nr,k(n(o)("Disable all audios")),1)]),d("div",sr,[b(_,{value:!n(a).enableAudio,onChange:I},null,8,["value"])])]),d("div",ar,[d("div",ir,[b(ie,{class:"setting-icon","icon-name":n(Q).CameraOn,size:"large"},null,8,["icon-name"]),d("span",rr,k(n(o)("Disable all videos")),1)]),d("div",lr,[b(_,{value:!n(a).enableVideo,onChange:f},null,8,["value"])])])]),ur,d("div",cr,[d("div",dr,[ce(k(n(o)("Member List"))+" ",1),d("span",mr,"("+k(n(i))+k(n(o)("members"))+")",1)]),d("div",pr,[(m(!0),S(de,null,be(n(r),R=>(m(),z(Ji,{key:R.userId,"user-info":R},null,8,["user-info"]))),128))])])])}}});const fr={class:"sidebar-container"},_r=P({__name:"index",setup(e){const{t}=oe(),o=Se(),s=ut(),a=me(),{isSidebarOpen:r,sidebarName:i}=X(a),u=A(()=>i.value==="chat"?t("Chat"):i.value==="invite"?t("Invite"):i.value==="more"?t("Contact us"):i.value==="manage-member"?t("Member management"):"");function l(f){a.setSidebarOpenStatus(!1),a.setSidebarName(""),f()}const I=f=>{console.warn("onReceiveTextMessage:",f);const{message:g}=f;s.updateMessageList({ID:g.messageId,type:"TIMTextElem",payload:{text:g.message},nick:(g==null?void 0:g.userName)||g.userId,from:g.userId,flow:"in",sequence:Math.random()}),(!a.isSidebarOpen||a.sidebarName!=="chat")&&s.updateUnReadCount(++s.unReadCount)};return Le.once("ready",()=>{var f;(f=o.instance)==null||f.on(E.exports.TUIRoomEvents.onReceiveTextMessage,I)}),$e(()=>{var f;(f=o.instance)==null||f.off(E.exports.TUIRoomEvents.onReceiveTextMessage,I)}),(f,g)=>{const v=Lo;return m(),S("div",fr,[b(v,{modelValue:n(r),"onUpdate:modelValue":g[0]||(g[0]=_=>Vt(r)?r.value=_:null),"custom-class":"custom-element-class",modal:!1,title:n(u),direction:"rtl","before-close":l,size:480},{default:V(()=>[n(i)=="chat"?(m(),z(ai,{key:0})):D("",!0),n(i)=="invite"?(m(),z(Ei,{key:1})):D("",!0),n(i)=="more"?(m(),z(Ui,{key:2})):D("",!0),n(i)=="manage-member"?(m(),z(vr,{key:3})):D("",!0)]),_:1},8,["modelValue","title"])])}}});const gr={key:0,class:"setting-dialog"},hr={class:"dialog-tabs"},yr={class:"dialog-title"},Cr=["onClick"],Ir={class:"dialog-content"},Er=P({__name:"index",setup(e){const{t}=oe(),o=me(),{showSettingDialog:s,activeSettingTab:a}=X(o),r=A(()=>[{label:t("Audio settings"),value:"audio"},{label:t("Camera settings"),value:"video"}]);function i(l){o.setActiveSettingTab(l)}function u(){o.setShowSettingDialog(!1)}return(l,I)=>n(s)?(m(),S("div",gr,[d("div",hr,[d("span",yr,k(n(t)("Settings")),1),(m(!0),S(de,null,be(n(r),(f,g)=>(m(),S("div",{key:g,class:K(["tabs-title",`${n(a)===f.value?"active":""}`]),onClick:v=>i(f.value)},k(f.label),11,Cr))),128))]),d("div",Ir,[n(a)==="audio"?(m(),z(Wt,{key:0,mode:n(Ut).DETAIL},null,8,["mode"])):D("",!0),n(a)==="video"?(m(),z(Qt,{key:1,mode:n(Ut).DETAIL},null,8,["mode"])):D("",!0)]),b(ie,{class:"close-icon","icon-name":"close",size:"medium",onClick:u})])):D("",!0)}});var Rr=ue(Er,[["__scopeId","data-v-7707490b"]]);const Sr=P({__name:"index",emits:["onLogOut","onCreateRoom","onEnterRoom","onExitRoom","onDestroyRoom","onKickedOutOfRoom","onKickedOffLine","onUserSigExpired"],setup(e,{expose:t,emit:o}){const s=Tt(),a=Se(),{t:r}=oe();t({init:J,createRoom:G,enterRoom:C});const i="[Room]",u=me(),l=_e(),I=ut(),{sdkAppId:f}=X(u),{localUser:g,localVideoProfile:v}=X(l),_=w(),R=w(!0),y=w();function h(){R.value=!1}const x=yo(h,5e3),j=Co(x,1e3);ke(()=>{var U,N,F,q;(U=y.value)==null||U.addEventListener("mouseenter",()=>{R.value=!0,x()}),(N=y.value)==null||N.addEventListener("click",()=>{R.value=!0,x()},!1),(F=y.value)==null||F.addEventListener("mousemove",()=>{R.value=!0,j()}),(q=y.value)==null||q.addEventListener("mouseleave",()=>{R.value=!1})}),$e(()=>{var U,N,F,q;(U=y.value)==null||U.removeEventListener("mouseenter",()=>{R.value=!0,x()}),(N=y.value)==null||N.removeEventListener("click",()=>{R.value=!0,x()},!1),(F=y.value)==null||F.removeEventListener("mousemove",()=>{R.value=!0,j()}),(q=y.value)==null||q.removeEventListener("mouseleave",()=>{R.value=!1})});async function J(U){const{sdkAppId:N,userId:F,userSig:q,userName:ne,avatarUrl:T}=U;await Le.init({sdkAppId:N,userId:F,userSig:q}),await Le.setSelfInfo({userName:ne,avatarUrl:T}),u.setBasicInfo(U),l.setLocalUser(U)}async function G(U){var L,$,W,te,xe;const{roomId:N,roomName:F,roomMode:q,roomParam:ne}=U;if(!a.instance)return;u.setRoomId(N),console.debug(`${i}createRoom:`,N,q,ne);const T={roomId:N,name:F,roomType:E.exports.TUIRoomType.kGroup};q==="FreeSpeech"?Object.assign(T,{enableAudio:!0,enableVideo:!0,enableMessage:!0,enableSeatControl:!1}):Object.assign(T,{enableAudio:!0,enableVideo:!0,enableMessage:!0,enableSeatControl:!0}),await((L=a.instance)==null?void 0:L.createRoom(T)),o("onCreateRoom",{code:0,message:"create room success"}),await(($=a.instance)==null?void 0:$.enterRoom({roomId:N})),o("onEnterRoom",{code:0,message:"enter room success"});const M=await((W=a.instance)==null?void 0:W.getRoomInfo());l.setRoomInfo(M),await((te=a.instance)==null?void 0:te.takeSeat({seatIndex:-1,timeout:0})),l.setLocalUser({onSeat:!0}),await c(),await((xe=a.instance)==null?void 0:xe.setLocalVideoProfile({videoProfile:v.value})),l.setRoomParam(ne),Me.reportEvent({name:"createRoom",ext1:"createRoom-success"})}async function C(U){var ne,T,M;const{roomId:N,roomParam:F}=U;if(!a.instance)return;u.setRoomId(N),console.debug(`${i}enterRoom:`,N,F);const q=await((ne=a.instance)==null?void 0:ne.enterRoom({roomId:N}));l.setRoomInfo(q),q.enableSeatControl||(await((T=a.instance)==null?void 0:T.takeSeat({seatIndex:-1,timeout:0})),l.setLocalUser({onSeat:!0})),await((M=a.instance)==null?void 0:M.setLocalVideoProfile({videoProfile:v.value})),await c(),l.setRoomParam(F),o("onEnterRoom",{code:0,message:"enter room success"}),Me.reportEvent({name:"enterRoom",ext1:"enterRoom-success"})}async function c(){var U;try{const{userInfoList:N}=await((U=a.instance)==null?void 0:U.getUserList());l.setUserList(N)}catch(N){console.error("TUIRoomEngine.getUserList",N.code,N.message)}}const p=U=>{const{userVolumeList:N}=U;l.setAudioVolume(N)},O=U=>{u.setLocalQuality(U.userNetworkList)};function H(){u.reset(),I.reset(),l.reset()}const Y=()=>{H(),o("onLogOut")},se=U=>{H(),o("onDestroyRoom",U)},ge=U=>{H(),o("onExitRoom",U)},ee=U=>{console.error("roomEngine.onError: ",U)},Ce=U=>{const{userId:N,muted:F}=U;if(N===g.value.userId){const q=r(F?"You have been banned from text chat by the host":"You are allowed to text chat by the host");le({type:"warning",message:q,duration:ye.NORMAL}),I.setIsMuteChatByMater(F)}},Ee=async U=>{const{roomId:N,message:F}=U;try{H(),He.alert(r("kicked out of the room by the host"),r("Note"),{confirmButtonText:r("Confirm"),callback:async()=>{o("onKickedOutOfRoom",{roomId:N,message:F})}})}catch(q){console.error(`${i}onKickedOutOfRoom error:`,q)}},B=()=>{He.alert("userSig \u5DF2\u8FC7\u671F",r("Note"),{confirmButtonText:r("Confirm"),callback:async()=>{o("onUserSigExpired")}})},ae=U=>{const{message:N}=U;He.alert("\u7CFB\u7EDF\u68C0\u6D4B\u5230\u60A8\u7684\u8D26\u53F7\u88AB\u8E22\u4E0B\u7EBF",r("Note"),{confirmButtonText:r("Confirm"),callback:async()=>{o("onKickedOffLine",{message:N})}})};async function fe(U){var F,q;const N=r(U?"The host has unmuted all":"The host has muted all");le({type:"warning",message:N,duration:ye.NORMAL}),U||(await((F=a.instance)==null?void 0:F.closeLocalMicrophone()),await((q=a.instance)==null?void 0:q.stopPushLocalAudio()))}async function Ie(U){var F,q;const N=r(U?"The host has lifted the ban on all paintings":"The host has turned on the ban on all paintings");le({type:"warning",message:N,duration:ye.NORMAL}),U||(await((F=a.instance)==null?void 0:F.closeLocalCamera()),await((q=a.instance)==null?void 0:q.stopPushLocalVideo()))}const pe=U=>{const{roomInfo:N}=U,{enableAudio:F,enableVideo:q}=N;F!==l.enableAudio&&fe(F),q!==l.enableVideo&&Ie(q),l.setRoomInfo(N)};async function ct(){var q,ne,T,M,L,$,W,te,xe;const U=await((q=a.instance)==null?void 0:q.getCameraDevicesList()),N=await((ne=a.instance)==null?void 0:ne.getMicDevicesList()),F=await((T=a.instance)==null?void 0:T.getSpeakerDevicesList());if(l.setCameraList(U),l.setMicrophoneList(N),l.setSpeakerList(F),s){const Ue=(M=a.instance)==null?void 0:M.getCurrentCameraDevice(),ze=(L=a.instance)==null?void 0:L.getCurrentMicDevice(),ft=($=a.instance)==null?void 0:$.getCurrentSpeakerDevice();Ue&&Ue.deviceId&&l.setCurrentCameraId(Ue.deviceId),ze&&ze.deviceId&&l.setCurrentMicrophoneId(ze.deviceId),ft&&ft.deviceId&&l.setCurrentSpeakerId(ft.deviceId)}else U.length>0&&await((W=a.instance)==null?void 0:W.setCurrentCameraDevice({deviceId:U[0].deviceId})),N.length>0&&await((te=a.instance)==null?void 0:te.setCurrentMicDevice({deviceId:N[0].deviceId})),F.length>0&&await((xe=a.instance)==null?void 0:xe.setCurrentSpeakerDevice({deviceId:F[0].deviceId}))}async function Xe(U){var T,M,L;const N=["add","remove","active"],{deviceId:F,type:q,state:ne}=U;if(q===E.exports.TRTCDeviceType.TRTCDeviceTypeMic){console.log(`onDeviceChange: deviceId: ${F}, type: microphone, state: ${N[ne]}`);const $=await((T=a.instance)==null?void 0:T.getMicDevicesList());l.setMicrophoneList($),ne===E.exports.TRTCDeviceState.TRTCDeviceStateActive&&l.setCurrentMicrophoneId(F);return}if(q===E.exports.TRTCDeviceType.TRTCDeviceTypeSpeaker){console.log(`onDeviceChange: deviceId: ${F}, type: speaker, state: ${N[ne]}`);const $=await((M=a.instance)==null?void 0:M.getSpeakerDevicesList());l.setSpeakerList($),ne===E.exports.TRTCDeviceState.TRTCDeviceStateActive&&l.setCurrentSpeakerId(F);return}if(q===E.exports.TRTCDeviceType.TRTCDeviceTypeCamera){console.log(`onDeviceChange: deviceId: ${F}, type: camera, state: ${N[ne]}`);const $=await((L=a.instance)==null?void 0:L.getCameraDevicesList());l.setCameraList($),ne===E.exports.TRTCDeviceState.TRTCDeviceStateActive&&l.setCurrentCameraId(F)}}return Le.once("ready",()=>{var U,N,F,q,ne,T,M,L,$;(U=a.instance)==null||U.on(E.exports.TUIRoomEvents.onError,ee),(N=a.instance)==null||N.on(E.exports.TUIRoomEvents.onUserVoiceVolumeChanged,p),(F=a.instance)==null||F.on(E.exports.TUIRoomEvents.onUserNetworkQualityChanged,O),(q=a.instance)==null||q.on(E.exports.TUIRoomEvents.onKickedOutOfRoom,Ee),(ne=a.instance)==null||ne.on(E.exports.TUIRoomEvents.onUserMuteStateChanged,Ce),(T=a.instance)==null||T.on(E.exports.TUIRoomEvents.onUserSigExpired,B),(M=a.instance)==null||M.on(E.exports.TUIRoomEvents.onKickedOffLine,ae),(L=a.instance)==null||L.on(E.exports.TUIRoomEvents.onRoomInfoChanged,pe),($=a.instance)==null||$.on(E.exports.TUIRoomEvents.onDeviceChange,Xe),ct()}),$e(()=>{var U,N,F,q,ne,T,M,L,$;(U=a.instance)==null||U.off(E.exports.TUIRoomEvents.onError,ee),(N=a.instance)==null||N.off(E.exports.TUIRoomEvents.onUserVoiceVolumeChanged,p),(F=a.instance)==null||F.off(E.exports.TUIRoomEvents.onUserNetworkQualityChanged,O),(q=a.instance)==null||q.off(E.exports.TUIRoomEvents.onKickedOutOfRoom,Ee),(ne=a.instance)==null||ne.off(E.exports.TUIRoomEvents.onUserMuteStateChanged,Ce),(T=a.instance)==null||T.off(E.exports.TUIRoomEvents.onUserSigExpired,B),(M=a.instance)==null||M.off(E.exports.TUIRoomEvents.onKickedOffLine,ae),(L=a.instance)==null||L.off(E.exports.TUIRoomEvents.onRoomInfoChanged,pe),($=a.instance)==null||$.off(E.exports.TUIRoomEvents.onDeviceChange,Xe)}),re(f,U=>{U&&(Me.setSdkAppId(U),Me.reportEvent({name:"loaded",ext1:"loaded-success"}))}),(U,N)=>(m(),S("div",{id:"roomContainer",ref_key:"roomRef",ref:y,class:"tui-room"},[ve(b(vs,{class:"header",onLogOut:Y},null,512),[[he,R.value]]),b(Ls,{ref_key:"roomContentRef",ref:_,"show-room-tool":R.value,class:"content"},null,8,["show-room-tool"]),ve(b(Ua,{class:"footer",onOnDestroyRoom:se,onOnExitRoom:ge},null,512),[[he,R.value]]),b(_r),b(Rr)],512))}});var br=ue(Sr,[["__scopeId","data-v-3fb3b978"]]);const Dr=P({__name:"room",setup(e){const{t}=oe(),o=Io(),s=sessionStorage.getItem("tuiRoom-roomInfo"),a=sessionStorage.getItem("tuiRoom-userInfo"),r=Eo(o.query.roomId)?o.query.roomId:"";r?s||Ae.push({path:"home",query:{roomId:r}}):Ae.push({path:"home"});const i=w();ke(async()=>{var p,O,H;const{action:y,roomMode:h,roomParam:x}=JSON.parse(s);var{sdkAppId:j,userId:J,userSig:G,userName:C,avatarUrl:c}=JSON.parse(a);c="";try{if(await((p=i.value)==null?void 0:p.init({sdkAppId:j,userId:J,userSig:G,userName:C,avatarUrl:c})),y==="createRoom")try{await((O=i.value)==null?void 0:O.createRoom({roomId:r,roomName:r,roomMode:h,roomParam:x}))}catch(Y){const se=t("Failed to enter the room.")+Y.message;He.alert(se,t("Note"),{customClass:"custom-element-class",confirmButtonText:t("Confirm"),callback:()=>{Ae.replace({path:"home"})}})}else if(y==="enterRoom")try{await((H=i.value)==null?void 0:H.enterRoom({roomId:r,roomParam:x}))}catch(Y){const se=t("Failed to enter the room.")+Y.message;He.alert(se,t("Note"),{customClass:"custom-element-class",confirmButtonText:t("Confirm"),callback:()=>{Ae.replace({path:"home"})}})}}catch(Y){const se=t("Failed to enter the room.")+Y.message;He.alert(se,t("Note"),{customClass:"custom-element-class",confirmButtonText:t("Confirm"),callback:()=>{sessionStorage.removeItem("tuiRoom-currentUserInfo"),Ae.replace({path:"home"})}})}});function u(){console.log("onLogOut"),Ae.replace({path:"login"})}function l(y){console.debug("onEnterRoom:",y)}function I(y){console.debug("onCreateRoom:",y)}const f=y=>{console.debug("onDestroyRoom:",y),sessionStorage.removeItem("tuiRoom-roomInfo"),Ae.replace({path:"/home"})},g=y=>{console.debug("onExitRoom:",y),sessionStorage.removeItem("tuiRoom-roomInfo"),Ae.replace({path:"/home"})},v=y=>{console.debug("onKickedOutOfRoom:",y),sessionStorage.removeItem("tuiRoom-roomInfo"),Ae.replace({path:"/home"})},_=y=>{console.debug("onKickedOffLine:",y),sessionStorage.removeItem("tuiRoom-roomInfo"),Ae.replace({path:"/home"})},R=()=>{console.debug("onUserSigExpired"),sessionStorage.removeItem("tuiRoom-roomInfo"),sessionStorage.removeItem("tuiRoom-currentUserInfo"),Ae.replace({path:"/home"})};return(y,h)=>(m(),z(br,{ref_key:"TUIRoomRef",ref:i,onOnLogOut:u,onOnCreateRoom:l,onOnEnterRoom:I,onOnDestroyRoom:f,onOnExitRoom:g,onOnKickedOutOfRoom:v,onOnKickOffLine:_,onOnUserSigExpired:R},null,512))}});export{Dr as default};
